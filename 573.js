/*! For license information please see 573.js.LICENSE.txt */
(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[573],{7763:(e,t,n)=>{"use strict";n.d(t,{a:()=>z,z:()=>V});var a=n(3906),r=n(8264),s=function(){return(s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function i(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{o(a.next(e))}catch(e){s(e)}}function u(e){try{o(a.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}o((a=a.apply(e,t||[])).next())}))}function u(e,t){var n,a,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&s[0]?a.return:s[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,a=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function o(e,t,n,a){return new(n||(n=Promise))((function(r,s){function i(e){try{o(a.next(e))}catch(e){s(e)}}function u(e){try{o(a.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}o((a=a.apply(e,t||[])).next())}))}function d(e,t){var n,a,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&s[0]?a.return:s[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,a=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){i.label=s[1];break}if(6===s[0]&&i.label<r[1]){i.label=r[1],r=s;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(s);break}r[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var c=function(e){return{startEndTensor:e,startPoint:(0,a.slice)(e,[0,0],[-1,2]),endPoint:(0,a.slice)(e,[0,2],[-1,2])}},l={strides:[8,16],anchors:[2,6]};function p(e,t){var n,r,s;if(e.topLeft instanceof a.Tensor&&e.bottomRight instanceof a.Tensor){var i=(0,a.tidy)((function(){return[(0,a.concat)([(0,a.slice)((0,a.sub)(t-1,e.topLeft),0,1),(0,a.slice)(e.topLeft,1,1)]),(0,a.concat)([(0,a.sub)(t-1,(0,a.slice)(e.bottomRight,0,1)),(0,a.slice)(e.bottomRight,1,1)])]}));n=i[0],r=i[1],null!=e.landmarks&&(s=(0,a.tidy)((function(){var n=(0,a.sub)((0,a.tensor1d)([t-1,0]),e.landmarks),r=(0,a.tensor1d)([1,-1]);return(0,a.mul)(n,r)})))}else{var u=e.topLeft,o=u[0],d=u[1],c=e.bottomRight,l=c[0],p=c[1];n=[t-1-o,d],r=[t-1-l,p],null!=e.landmarks&&(s=e.landmarks.map((function(e){return[t-1-e[0],e[1]]})))}var f={topLeft:n,bottomRight:r};return null!=s&&(f.landmarks=s),null!=e.probability&&(f.probability=e.probability instanceof a.Tensor?e.probability.clone():e.probability),f}function f(e,t){return(0,a.tidy)((function(){var n;return n=e.hasOwnProperty("box")?e.box:e,(0,a.squeeze)(function(e,t){var n=(0,a.mul)(e.startPoint,t),r=(0,a.mul)(e.endPoint,t),s=(0,a.concat2d)([n,r],1);return c(s)}(n,t).startEndTensor)}))}var m=function(){function e(e,t,n,r,s,i){this.blazeFaceModel=e,this.width=t,this.height=n,this.maxFaces=r,this.anchorsData=function(e,t,n){for(var a=[],r=0;r<n.strides.length;r++)for(var s=n.strides[r],i=Math.floor((t+s-1)/s),u=Math.floor((e+s-1)/s),o=n.anchors[r],d=0;d<i;d++)for(var c=s*(d+.5),l=0;l<u;l++)for(var p=s*(l+.5),f=0;f<o;f++)a.push([p,c]);return a}(t,n,l),this.anchors=(0,a.tensor2d)(this.anchorsData),this.inputSizeData=[t,n],this.inputSize=(0,a.tensor1d)([t,n]),this.iouThreshold=s,this.scoreThreshold=i}return e.prototype.getBoundingBoxes=function(e,t,n){return void 0===n&&(n=!0),o(this,void 0,void 0,(function(){var r,s,i,u,l,p,f,m,h,b,y,g,_,w,k=this;return d(this,(function(I){switch(I.label){case 0:return r=(0,a.tidy)((function(){var t=a.image.resizeBilinear(e,[k.width,k.height]),n=(0,a.mul)((0,a.sub)((0,a.div)(t,255),.5),2),r=k.blazeFaceModel.predict(n),s=(0,a.squeeze)(r),i=function(e,t,n){var r=(0,a.slice)(e,[0,1],[-1,2]),s=(0,a.add)(r,t),i=(0,a.slice)(e,[0,3],[-1,2]),u=(0,a.div)(i,n),o=(0,a.div)(s,n),d=(0,a.div)(u,2),c=(0,a.sub)(o,d),l=(0,a.add)(o,d),p=(0,a.mul)(c,n),f=(0,a.mul)(l,n);return(0,a.concat2d)([p,f],1)}(s,k.anchors,k.inputSize),u=(0,a.slice)(s,[0,0],[-1,1]);return[s,i,(0,a.squeeze)((0,a.sigmoid)(u))]})),s=r[0],i=r[1],u=r[2],l=console.warn,console.warn=function(){},p=a.image.nonMaxSuppression(i,u,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=l,[4,p.array()];case 1:return f=I.sent(),p.dispose(),m=f.map((function(e){return(0,a.slice)(i,[e,0],[1,-1])})),t?[3,3]:[4,Promise.all(m.map((function(e){return o(k,void 0,void 0,(function(){var t;return d(this,(function(n){switch(n.label){case 0:return[4,e.array()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 2:m=I.sent(),I.label=3;case 3:for(h=e.shape[1],b=e.shape[2],y=t?(0,a.div)([b,h],this.inputSize):[b/this.inputSizeData[0],h/this.inputSizeData[1]],g=[],_=function(e){var r=m[e],i=(0,a.tidy)((function(){var i=c(r instanceof a.Tensor?r:(0,a.tensor2d)(r));if(!n)return i;var o,d=f[e];return o=t?(0,a.slice)(k.anchors,[d,0],[1,2]):k.anchorsData[d],{box:i,landmarks:(0,a.reshape)((0,a.squeeze)((0,a.slice)(s,[d,5],[1,-1])),[6,-1]),probability:(0,a.slice)(u,[d],[1]),anchor:o}}));g.push(i)},w=0;w<m.length;w++)_(w);return i.dispose(),u.dispose(),s.dispose(),[2,{boxes:g,scaleFactor:y}]}}))}))},e.prototype.estimateFaces=function(e,t,n,r){return void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),o(this,void 0,void 0,(function(){var s,i,u,c,l,m,h=this;return d(this,(function(b){switch(b.label){case 0:return s=function(e){return e instanceof a.Tensor?[e.shape[0],e.shape[1]]:[e.height,e.width]}(e),i=s[1],u=(0,a.tidy)((function(){return e instanceof a.Tensor||(e=a.browser.fromPixels(e)),(0,a.expandDims)((0,a.cast)(e,"float32"),0)})),[4,this.getBoundingBoxes(u,t,r)];case 1:return c=b.sent(),l=c.boxes,m=c.scaleFactor,u.dispose(),t?[2,l.map((function(e){var t=f(e,m),s={topLeft:(0,a.slice)(t,[0],[2]),bottomRight:(0,a.slice)(t,[2],[2])};if(r){var u=e,o=u.landmarks,d=u.probability,c=u.anchor,l=(0,a.mul)((0,a.add)(o,c),m);s.landmarks=l,s.probability=d}return n&&(s=p(s,i)),s}))]:[2,Promise.all(l.map((function(e){return o(h,void 0,void 0,(function(){var t,a,s,u,c,l,h,b,y,g,_,w=this;return d(this,(function(k){switch(k.label){case 0:return t=f(e,m),r?[3,2]:[4,t.array()];case 1:return c=k.sent(),a={topLeft:c.slice(0,2),bottomRight:c.slice(2)},[3,4];case 2:return[4,Promise.all([e.landmarks,t,e.probability].map((function(e){return o(w,void 0,void 0,(function(){return d(this,(function(t){return[2,e.array()]}))}))})))];case 3:s=k.sent(),u=s[0],c=s[1],l=s[2],h=e.anchor,y=(b=m)[0],g=b[1],_=u.map((function(e){return[(e[0]+h[0])*y,(e[1]+h[1])*g]})),a={topLeft:c.slice(0,2),bottomRight:c.slice(2),landmarks:_,probability:l},function(e){e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose()}(e.box),e.landmarks.dispose(),e.probability.dispose(),k.label=4;case 4:return t.dispose(),n&&(a=p(a,i)),[2,a]}}))}))})))]}}))}))},e}();function h(e){var t=void 0===e?{}:e,n=t.maxFaces,a=void 0===n?10:n,s=t.inputWidth,i=void 0===s?128:s,u=t.inputHeight,c=void 0===u?128:u,l=t.iouThreshold,p=void 0===l?.3:l,f=t.scoreThreshold,h=void 0===f?.75:f,b=t.modelUrl;return o(this,void 0,void 0,(function(){var e;return d(this,(function(t){switch(t.label){case 0:return null==b?[3,2]:[4,(0,r.loadGraphModel)(b)];case 1:return e=t.sent(),[3,4];case 2:return[4,(0,r.loadGraphModel)("https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1",{fromTFHub:!0})];case 3:e=t.sent(),t.label=4;case 4:return[2,new m(e,i,c,a,p,h)]}}))}))}var b={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]};function y(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]}function g(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2]}function _(e,t){void 0===t&&(t=1.5);var n=g(e),a=y(e),r=[t*a[0]/2,t*a[1]/2];return{startPoint:[n[0]-r[0],n[1]-r[1]],endPoint:[n[0]+r[0],n[1]+r[1]],landmarks:e.landmarks}}function w(e){var t=g(e),n=y(e),a=Math.max.apply(Math,n)/2;return{startPoint:[t[0]-a,t[1]-a],endPoint:[t[0]+a,t[1]+a],landmarks:e.landmarks}}var k=[[1,0,0],[0,1,0],[0,0,1]];function I(e,t){return[[1,0,e],[0,1,t],[0,0,1]]}function v(e,t){for(var n=0,a=0;a<e.length;a++)n+=e[a]*t[a];return n}function S(e,t){for(var n=[],a=0;a<e.length;a++)n.push(e[a][t]);return n}function M(e,t){for(var n=[],a=e.length,r=0;r<a;r++){n.push([]);for(var s=0;s<a;s++)n[r].push(v(e[r],S(t,s)))}return n}function E(e,t){var n=Math.cos(e),a=Math.sin(e),r=[[n,-a,0],[a,n,0],[0,0,1]],s=M(I(t[0],t[1]),r);return M(s,I(-t[0],-t[1]))}var x=[13,b.midwayBetweenEyes[0]],A=[3,2],F=b.leftEyeLower0,N=[F[0],F[F.length-1]],O=b.rightEyeLower0,T=[O[0],O[O.length-1]],R=[{key:"EyeUpper0",indices:[9,10,11,12,13,14,15]},{key:"EyeUpper1",indices:[25,26,27,28,29,30,31]},{key:"EyeUpper2",indices:[41,42,43,44,45,46,47]},{key:"EyeLower0",indices:[0,1,2,3,4,5,6,7,8]},{key:"EyeLower1",indices:[16,17,18,19,20,21,22,23,24]},{key:"EyeLower2",indices:[32,33,34,35,36,37,38,39,40]},{key:"EyeLower3",indices:[54,55,56,57,58,59,60,61,62]},{key:"EyebrowUpper",indices:[63,64,65,66,67,68,69,70]},{key:"EyebrowLower",indices:[48,49,50,51,52,53]}];function P(e,t,n,a){for(var r=0;r<R.length;r++){var s=R[r],i=s.key,u=s.indices,o=b[""+n+i];if(null==a||a.includes(i))for(var d=0;d<u.length;d++){var c=u[d];e[o[d]]=[t[c][0],t[c][1],(t[c][2]+e[o[d]][2])/2]}}}var C=function(){function e(e,t,n,a,r,s,i){this.regionsOfInterest=[],this.runsWithoutFaceDetector=0,this.boundingBoxDetector=e,this.meshDetector=t,this.irisModel=i,this.meshWidth=n,this.meshHeight=a,this.maxContinuousChecks=r,this.maxFaces=s}return e.prototype.transformRawCoords=function(e,t,n,a){var r,s,i,u,o=this,d=y({startPoint:t.startPoint,endPoint:t.endPoint}),c=[d[0]/this.meshWidth,d[1]/this.meshHeight],l=e.map((function(e){return[c[0]*(e[0]-o.meshWidth/2),c[1]*(e[1]-o.meshHeight/2),e[2]]})),p=E(n,[0,0]),f=l.map((function(e){return function(e,t){return[v(e,t[0]),v(e,t[1])]}(e,p).concat([e[2]])})),m=(s=[[(r=a)[0][0],r[1][0]],[r[0][1],r[1][1]]],i=[r[0][2],r[1][2]],u=[-v(s[0],i),-v(s[1],i)],[s[0].concat(u[0]),s[1].concat(u[1]),[0,0,1]]),h=g({startPoint:t.startPoint,endPoint:t.endPoint}).concat([1]),b=[v(h,m[0]),v(h,m[1])];return f.map((function(e){return[e[0]+b[0],e[1]+b[1],e[2]]}))},e.prototype.getLeftToRightEyeDepthDifference=function(e){return e[N[0]][2]-e[T[0]][2]},e.prototype.getEyeBox=function(e,t,n,r,s){void 0===s&&(s=!1);var i=w(_(this.calculateLandmarksBoundingBox([e[n],e[r]]),2.3)),u=y(i),o=a.image.cropAndResize(t,[[i.startPoint[1]/this.meshHeight,i.startPoint[0]/this.meshWidth,i.endPoint[1]/this.meshHeight,i.endPoint[0]/this.meshWidth]],[0],[64,64]);return s&&(o=a.image.flipLeftRight(o)),{box:i,boxSize:u,crop:o}},e.prototype.getEyeCoords=function(e,t,n,a){void 0===a&&(a=!1);for(var r=[],s=0;s<76;s++){var i=e[3*s],u=e[3*s+1],o=e[3*s+2];r.push([(a?1-i/64:i/64)*n[0]+t.startPoint[0],u/64*n[1]+t.startPoint[1],o])}return{rawCoords:r,iris:r.slice(71)}},e.prototype.getAdjustedIrisCoords=function(e,t,n){var a=e[b[n+"EyeUpper0"][3]][2],r=e[b[n+"EyeLower0"][4]][2],s=(a+r)/2;return t.map((function(e,t){var n=s;return 2===t?n=a:4===t&&(n=r),[e[0],e[1],n]}))},e.prototype.predict=function(e,t){return i(this,void 0,void 0,(function(){var n,r,i,o,d=this;return u(this,(function(u){switch(u.label){case 0:return this.shouldUpdateRegionsOfInterest()?[4,this.boundingBoxDetector.getBoundingBoxes(e,!1,!0)]:[3,2];case 1:return n=u.sent(),r=n.boxes,i=n.scaleFactor,0===r.length?(this.regionsOfInterest=[],[2,null]):(o=r.map((function(e){var t,n,r={startPoint:(0,a.squeeze)(e.box.startPoint).arraySync(),endPoint:(0,a.squeeze)(e.box.endPoint).arraySync()},u=w(_((n=i,{startPoint:[(t=r).startPoint[0]*n[0],t.startPoint[1]*n[1]],endPoint:[t.endPoint[0]*n[0],t.endPoint[1]*n[1]]})));return s({},u,{landmarks:e.landmarks.arraySync()})})),r.forEach((function(e){null!=e&&null!=e.startPoint&&(e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose())})),this.updateRegionsOfInterest(o),this.runsWithoutFaceDetector=0,[3,3]);case 2:this.runsWithoutFaceDetector++,u.label=3;case 3:return[2,(0,a.tidy)((function(){return d.regionsOfInterest.map((function(n,r){var i,u=n.landmarks.length>=468,o=x[0],c=x[1];!1===u&&(o=A[0],c=A[1]),i=function(e,t){var n;return(n=Math.PI/2-Math.atan2(-(t[1]-e[1]),t[0]-e[0]))-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI))}(n.landmarks[o],n.landmarks[c]);var l=g({startPoint:n.startPoint,endPoint:n.endPoint}),p=[l[0]/e.shape[2],l[1]/e.shape[1]],f=e,m=k;0!==i&&(f=a.image.rotateWithOffset(e,i,0,p),m=E(-i,l));var h={startPoint:n.startPoint,endPoint:n.endPoint},b=(0,a.div)(function(e,t,n){var r=t.shape[1],s=t.shape[2],i=[[e.startPoint[1]/r,e.startPoint[0]/s,e.endPoint[1]/r,e.endPoint[0]/s]];return a.image.cropAndResize(t,i,[0],n,"bilinear",0)}(h,f,[d.meshHeight,d.meshWidth]),255),y=d.meshDetector.predict(b),I=y[1],v=y[2],S=(0,a.reshape)(v,[-1,3]).arraySync();if(t){var M=d.getEyeBox(S,b,N[0],N[1],!0),F=M.box,O=M.boxSize,R=M.crop,C=d.getEyeBox(S,b,T[0],T[1]),D=C.box,L=C.boxSize,W=C.crop,B=d.irisModel.predict((0,a.concat)([R,W])).dataSync(),H=B.slice(0,228),U=d.getEyeCoords(H,F,O,!0),z=U.rawCoords,j=U.iris,V=B.slice(228),G=d.getEyeCoords(V,D,L),q=G.rawCoords,$=G.iris,K=d.getLeftToRightEyeDepthDifference(S);Math.abs(K)<30?(P(S,z,"left"),P(S,q,"right")):K<1?P(S,z,"left",["EyeUpper0","EyeLower0"]):P(S,q,"right",["EyeUpper0","EyeLower0"]);var X=d.getAdjustedIrisCoords(S,j,"left"),Q=d.getAdjustedIrisCoords(S,$,"right");S=S.concat(X).concat(Q)}var Y=d.transformRawCoords(S,n,i,m),Z=(0,a.tensor2d)(Y),J=_(d.calculateLandmarksBoundingBox(Y)),ee=w(J);return d.regionsOfInterest[r]=s({},ee,{landmarks:Z.arraySync()}),{coords:(0,a.tensor2d)(S,[S.length,3]),scaledCoords:Z,box:J,flag:(0,a.squeeze)(I)}}))}))]}}))}))},e.prototype.updateRegionsOfInterest=function(e){for(var t=0;t<e.length;t++){var n=e[t],a=this.regionsOfInterest[t],r=0;if(a&&a.startPoint){var s=n.startPoint,i=s[0],u=s[1],o=n.endPoint,d=o[0],c=o[1],l=a.startPoint,p=l[0],f=l[1],m=a.endPoint,h=m[0],b=m[1],y=Math.max(i,p),g=Math.max(u,f),_=(Math.min(d,h)-y)*(Math.min(c,b)-g);r=_/((d-i)*(c-u)+(h-p)*(b-u)-_)}r<.25&&(this.regionsOfInterest[t]=n)}this.regionsOfInterest=this.regionsOfInterest.slice(0,e.length)},e.prototype.clearRegionOfInterest=function(e){null!=this.regionsOfInterest[e]&&(this.regionsOfInterest=this.regionsOfInterest.slice(0,e).concat(this.regionsOfInterest.slice(e+1)))},e.prototype.shouldUpdateRegionsOfInterest=function(){var e=this.regionsOfInterest.length,t=0===e;return 1===this.maxFaces||t?t:e!==this.maxFaces&&this.runsWithoutFaceDetector>=this.maxContinuousChecks},e.prototype.calculateLandmarksBoundingBox=function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{startPoint:[Math.min.apply(Math,t),Math.min.apply(Math,n)],endPoint:[Math.max.apply(Math,t),Math.max.apply(Math,n)]}},e}(),D=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]];function L(e){return i(this,void 0,void 0,(function(){var t,n,a,r,s,i,o,d,c,l,p,f,m,h,b,y;return u(this,(function(u){switch(u.label){case 0:return t=e.maxContinuousChecks,n=void 0===t?5:t,a=e.detectionConfidence,r=void 0===a?.9:a,s=e.maxFaces,i=void 0===s?10:s,o=e.iouThreshold,d=void 0===o?.3:o,c=e.scoreThreshold,l=void 0===c?.75:c,p=e.shouldLoadIrisModel,f=void 0===p||p,m=e.modelUrl,h=e.detectorModelUrl,b=e.irisModelUrl,f?[4,Promise.all([W(h,i,d,l),B(m),H(b)])]:[3,2];case 1:return y=u.sent(),[3,4];case 2:return[4,Promise.all([W(h,i,d,l),B(m)])];case 3:y=u.sent(),u.label=4;case 4:return[2,new j(y[0],y[1],n,r,i,f?y[2]:null)]}}))}))}function W(e,t,n,a){return i(this,void 0,void 0,(function(){return u(this,(function(r){return[2,h({modelUrl:e,maxFaces:t,iouThreshold:n,scoreThreshold:a})]}))}))}function B(e){return i(this,void 0,void 0,(function(){return u(this,(function(t){return null!=e?[2,(0,r.loadGraphModel)(e)]:[2,(0,r.loadGraphModel)("https://tfhub.dev/mediapipe/tfjs-model/facemesh/1/default/1",{fromTFHub:!0})]}))}))}function H(e){return i(this,void 0,void 0,(function(){return u(this,(function(t){return null!=e?[2,(0,r.loadGraphModel)(e)]:[2,(0,r.loadGraphModel)("https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2",{fromTFHub:!0})]}))}))}function U(e,t){if(e.mesh instanceof a.Tensor){var n=(0,a.tidy)((function(){var n=(0,a.tensor1d)([t-1,0,0]),r=(0,a.tensor1d)([1,-1,1]);return(0,a.tidy)((function(){return[(0,a.concat)([(0,a.sub)(t-1,(0,a.slice)(e.boundingBox.topLeft,0,1)),(0,a.slice)(e.boundingBox.topLeft,1,1)]),(0,a.concat)([(0,a.sub)(t-1,(0,a.slice)(e.boundingBox.bottomRight,0,1)),(0,a.slice)(e.boundingBox.bottomRight,1,1)]),(0,a.mul)((0,a.sub)(n,e.mesh),r),(0,a.mul)((0,a.sub)(n,e.scaledMesh),r)]}))})),r=n[0],s=n[1],i=n[2],u=n[3];return Object.assign({},e,{boundingBox:{topLeft:r,bottomRight:s},mesh:i,scaledMesh:u})}return Object.assign({},e,{boundingBox:{topLeft:[t-1-e.boundingBox.topLeft[0],e.boundingBox.topLeft[1]],bottomRight:[t-1-e.boundingBox.bottomRight[0],e.boundingBox.bottomRight[1]]},mesh:e.mesh.map((function(e){var n=e.slice(0);return n[0]=t-1-e[0],n})),scaledMesh:e.scaledMesh.map((function(e){var n=e.slice(0);return n[0]=t-1-e[0],n}))})}var z,j=function(){function e(e,t,n,a,r,s){this.kind="MediaPipeFaceMesh",this.pipeline=new C(e,t,192,192,n,r,s),this.detectionConfidence=a}return e.getAnnotations=function(){return b},e.getUVCoords=function(){return D},e.prototype.estimateFaces=function(e){return i(this,void 0,void 0,(function(){var t,n,r,s,o,d,c,l,p,f,m,h,y=this;return u(this,(function(g){switch(g.label){case 0:if(t=e.returnTensors,n=void 0!==t&&t,r=e.flipHorizontal,s=void 0!==r&&r,o=e.predictIrises,d=void 0===o||o,c=e.input,d&&null==this.pipeline.irisModel)throw new Error("The iris model was not loaded as part of facemesh. Please initialize the model with facemesh.load({shouldLoadIrisModel: true}).");return l=function(e){return e instanceof a.Tensor?[e.shape[0],e.shape[1]]:[e.height,e.width]}(c),p=l[1],f=(0,a.tidy)((function(){return c instanceof a.Tensor||(c=a.browser.fromPixels(c)),(0,a.expandDims)((0,a.cast)(c,"float32"),0)})),"webgl"!==(0,a.getBackend)()?[3,2]:(h=(0,a.env)().get("WEBGL_PACK_DEPTHWISECONV"),(0,a.env)().set("WEBGL_PACK_DEPTHWISECONV",!0),[4,this.pipeline.predict(f,d)]);case 1:return m=g.sent(),(0,a.env)().set("WEBGL_PACK_DEPTHWISECONV",h),[3,4];case 2:return[4,this.pipeline.predict(f,d)];case 3:m=g.sent(),g.label=4;case 4:return f.dispose(),null!=m&&m.length>0?[2,Promise.all(m.map((function(e,t){return i(y,void 0,void 0,(function(){var r,o,c,l,f,m,h,y,g,_,w,k,I,v,S=this;return u(this,(function(M){switch(M.label){case 0:return r=e.coords,o=e.scaledCoords,c=e.box,l=e.flag,f=[l],n||(f=f.concat([r,o])),[4,Promise.all(f.map((function(e){return i(S,void 0,void 0,(function(){return u(this,(function(t){return[2,e.array()]}))}))})))];case 1:if(m=M.sent(),h=m[0],l.dispose(),h<this.detectionConfidence&&this.pipeline.clearRegionOfInterest(t),n)return y={kind:"MediaPipePredictionTensors",faceInViewConfidence:h,mesh:r,scaledMesh:o,boundingBox:{topLeft:(0,a.tensor1d)(c.startPoint),bottomRight:(0,a.tensor1d)(c.endPoint)}},s?[2,U(y,p)]:[2,y];for(v in g=m.slice(1),_=g[0],w=g[1],o.dispose(),r.dispose(),k={kind:"MediaPipePredictionValues",faceInViewConfidence:h,boundingBox:{topLeft:c.startPoint,bottomRight:c.endPoint},mesh:_,scaledMesh:w},s&&(k=U(k,p)),I={},b)(d||!1===v.includes("Iris"))&&(I[v]=b[v].map((function(e){return k.scaledMesh[e]})));return k.annotations=I,[2,k]}}))}))})))]:[2,[]]}}))}))},e}();function V(e,t){return void 0===e&&(e=z.mediapipeFacemesh),void 0===t&&(t={}),i(this,void 0,void 0,(function(){return u(this,(function(n){if(e===z.mediapipeFacemesh)return[2,L(t)];throw new Error(e+" is not a valid package name.")}))}))}(z||(z={})).mediapipeFacemesh="mediapipe-facemesh"},176:(e,t,n)=>{"use strict";n.d(t,{_1:()=>An,Ye:()=>On});var a,r,s=n(3906);let i;!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(a||(a={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(r||(r={}));const u={kernelName:s._FusedMatMul,backendName:"wasm",setupFunc:function(e){i=e.wasm.cwrap(s._FusedMatMul,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:u,b:o,bias:d,preluActivationWeights:c}=t;if("float32"!==u.dtype||"float32"!==o.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");const{transposeA:l,transposeB:p,activation:f,leakyreluAlpha:m}=a,h=n.dataIdMap.get(u.dataId).id,b=n.dataIdMap.get(o.dataId).id;let y=0;if(null!=d){const e=n.dataIdMap.get(d.dataId);if(1!==e.shape.length)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${e.shape.length}.`);y=e.id}const g=null==c?0:n.dataIdMap.get(c.dataId).id,_=r[f];if(null==_)throw new Error(`${f} activation not yet supported for FusedConv2D in the wasm backend.`);const w=l?u.shape[2]:u.shape[1],k=p?o.shape[1]:o.shape[2],I=s.broadcast_util.assertAndGetBroadcastShape(u.shape.slice(0,-2),o.shape.slice(0,-2)),v=n.makeOutput([...I,w,k],u.dtype),S=n.dataIdMap.get(v.dataId).id,M=new Uint8Array(new Int32Array(u.shape).buffer),E=new Uint8Array(new Int32Array(o.shape).buffer);return i(h,M,u.shape.length,b,E,o.shape.length,l,p,_,y,g,m||0,S),v}};function o(e,t){let n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){const{backend:r,inputs:{x:i}}=e,u=r.dataIdMap.get(i.dataId).id,o=r.makeOutput(i.shape,t||i.dtype),d=r.dataIdMap.get(o.dataId).id;return 0===s.util.sizeFromShape(o.shape)||n(u,a[i.dtype],d),o}}}const d=o(s.Abs);function c(e,t,n){let r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:i}=e,{a:u,b:o}=i,d=t.dataIdMap.get(u.dataId).id,c=t.dataIdMap.get(o.dataId).id,l=null!=n?n:u.dtype,p=s.backend_util.assertAndGetBroadcastShape(u.shape,o.shape),f=t.makeOutput(p,l);if(0===s.util.sizeFromShape(p))return f;const m=new Uint8Array(new Int32Array(u.shape).buffer),h=new Uint8Array(new Int32Array(o.shape).buffer),b=t.dataIdMap.get(f.dataId).id;return r(d,m,u.shape.length,c,h,o.shape.length,a[u.dtype],b),f}}}const l=c(s.Add);let p;const f={kernelName:s.AddN,backendName:"wasm",setupFunc:function(e){p=e.wasm.cwrap(s.AddN,null,["array","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n}=e,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===s.util.sizeFromShape(r.shape))return r;const i=t.map((e=>n.dataIdMap.get(e.dataId).id)),u=new Uint8Array(new Int32Array(i).buffer),o=n.dataIdMap.get(r.dataId).id;return p(u,i.length,a[r.dtype],o),r}};function m(e){const{inputs:{x:t},backend:n}=e,a=n.makeOutput(t.shape,t.dtype),r=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(a).set(r),a}const h={kernelName:s.Identity,backendName:"wasm",kernelFunc:m};let b;function y(e){const{inputs:t,backend:n,attrs:r}=e,[s,i]=function(e,t){const n=[],a=[];for(let r=0;r<e.length;++r)1!==e[r]&&n.push(e[r]),1!==e[t[r]]&&a.push(t[r]);for(let e=0;e<a.length;++e){let t=-1;for(let n=0;n<a.length;++n)a[n]>=e&&(-1===t||a[t]>a[n])&&(t=n);a[t]=e}return[n,a]}(t.x.shape,r.perm);let u=!0;for(let e=0;e<i.length;e++)i[e]!==e&&(u=!1);const o=function(e,t){const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[t[a]];return n}(t.x.shape,r.perm),d={dataId:t.x.dataId,shape:s,dtype:t.x.dtype};if(u){const e=m({inputs:t,backend:n});return e.shape=o,e}const c=n.makeOutput(o,d.dtype),l=n.dataIdMap.get(d.dataId).id,p=n.dataIdMap.get(c.dataId).id,f=new Uint8Array(new Int32Array(i).buffer),h=new Uint8Array(new Int32Array(d.shape).buffer);return b(l,h,d.shape.length,a[d.dtype],p,f,i.length),c}const g={kernelName:s.Transpose,backendName:"wasm",kernelFunc:y,setupFunc:function(e){b=e.wasm.cwrap(s.Transpose,null,["number","array","number","number","number","array","number"])}};function _(e,t,n){const a=e.shape,r=e.shape.length,i=s.util.parseAxisParam(t,a);let u=i;const o=s.backend_util.getAxesPermutation(u,r);let d=null,c=!1;if(null!=o){const t=new Array(r);for(let e=0;e<t.length;e++)t[e]=a[o[e]];u=s.backend_util.getInnerMostAxes(u.length,r),d=y({inputs:{x:e},attrs:{perm:o},backend:n});const i=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(d.dataId).id!==i&&(c=!0)}return{transposed:d,originalAxes:i,axes:u,inputWasTransposed:c}}let w;const k={kernelName:s.All,backendName:"wasm",setupFunc:function(e){w=e.wasm.cwrap(s.All,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{axis:r,keepDims:i}=a,{x:u}=n;let o=t.dataIdMap.get(u.dataId).id,d=u;const{transposed:c,axes:l,originalAxes:p,inputWasTransposed:f}=_(u,r,t);f&&(d=c,o=t.dataIdMap.get(c.dataId).id);const m=d.shape.length;s.backend_util.assertAxesAreInnerMostDims("all",l,m);const[h,b]=s.backend_util.computeOutAndReduceShapes(d.shape,l),y=s.util.sizeFromShape(b),g=t.makeOutput(h,u.dtype);if(0!==s.util.sizeFromShape(d.shape)){const e=t.dataIdMap.get(g.dataId).id;w(o,y,e)}if(f&&t.disposeData(c.dataId),i){const e=s.backend_util.expandShapeToKeepDim(g.shape,p);g.shape=e}return g}};let I;const v={kernelName:s.Any,backendName:"wasm",setupFunc:function(e){I=e.wasm.cwrap(s.Any,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{axis:r,keepDims:i}=a,{x:u}=n;let o=t.dataIdMap.get(u.dataId).id,d=u;const{transposed:c,axes:l,originalAxes:p,inputWasTransposed:f}=_(u,r,t);f&&(d=c,o=t.dataIdMap.get(c.dataId).id);const m=d.shape.length;s.backend_util.assertAxesAreInnerMostDims("any",l,m);const[h,b]=s.backend_util.computeOutAndReduceShapes(d.shape,l),y=s.util.sizeFromShape(b),g=t.makeOutput(h,u.dtype);if(0!==s.util.sizeFromShape(d.shape)){const e=t.dataIdMap.get(g.dataId).id;I(o,y,e)}if(f&&t.disposeData(c.dataId),i){const e=s.backend_util.expandShapeToKeepDim(g.shape,p);g.shape=e}return g}};let S;const M={kernelName:s.ArgMax,backendName:"wasm",kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{axis:i}=r,{x:u}=n,o=t.dataIdMap.get(u.dataId).id;let d=o,c=u;const{transposed:l,axes:p,inputWasTransposed:f}=_(u,i,t);if(f){const e=t.dataIdMap.get(l.dataId).id;e!==o&&(c=l,d=e)}const m=c.shape.slice(0,-1),h=t.makeOutput(m,"int32"),b=t.dataIdMap.get(h.dataId).id,y=s.util.sizeFromShape(h.shape),g=c.shape[p[0]];return S(d,a[c.dtype],y,g,b),f&&t.disposeData(l.dataId),h},setupFunc:function(e){S=e.wasm.cwrap(s.ArgMax,null,["number","number","number","number","number"])}};let E;const x={kernelName:s.AvgPool,backendName:"wasm",setupFunc:function(e){E=e.wasm.cwrap(s.AvgPool,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,r=t.x,i=a.dataIdMap.get(r.dataId).id,{filterSize:u,strides:o,pad:d,dimRoundingMode:c}=n,l=s.backend_util.computePool2DInfo(r.shape,u,o,1,d,c),p=l.filterHeight,f=l.filterWidth,m=l.padInfo.top,h=l.padInfo.right,b=l.padInfo.bottom,y=l.padInfo.left,g=l.strideHeight,_=l.strideWidth,w=l.inChannels;if("channelsLast"!==l.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${l.dataFormat}'. Please use 'channelsLast'.`);if(1!==l.dilationWidth||1!==l.dilationHeight)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${l.dilationHeight}, ${l.dilationWidth}].`);const k=a.makeOutput(l.outShape,"float32"),I=a.dataIdMap.get(k.dataId).id;return E(i,r.shape[0],r.shape[1],r.shape[2],p,f,m,h,b,y,g,_,w,I),k}};function A(e){const{inputs:t,attrs:n}=e,{x:a}=t,{shape:r}=n,i=s.util.sizeFromShape(a.shape),u=s.util.inferFromImplicitShape(r,i);return s.util.assert(i===s.util.sizeFromShape(u),(()=>`new shape: ${u}, old shape: ${a.shape}. New shape and old shape must have the same number of elements.`)),e.backend.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}}const F={kernelName:s.Reshape,backendName:"wasm",kernelFunc:A};let N;const O={kernelName:s.BatchMatMul,backendName:"wasm",setupFunc:function(e){N=e.wasm.cwrap(s.BatchMatMul,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:i}=t,{transposeA:u,transposeB:o}=a;if("float32"!==r.dtype||"float32"!==i.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");const d=r.shape.length,c=i.shape.length,l=u?r.shape[d-2]:r.shape[d-1],p=o?i.shape[c-1]:i.shape[c-2],f=u?r.shape[d-1]:r.shape[d-2],m=o?i.shape[c-2]:i.shape[c-1],h=r.shape.slice(0,-2),b=i.shape.slice(0,-2),y=s.util.sizeFromShape(h),g=s.util.sizeFromShape(b),_=s.broadcast_util.assertAndGetBroadcastShape(r.shape.slice(0,-2),i.shape.slice(0,-2)).concat([f,m]);s.util.assert(l===p,(()=>`Error in matMul: inner shapes (${l}) and (${p}) of Tensors with shapes ${r.shape} and ${i.shape} and transposeA=${u} and transposeB=${o} must match.`));const w=o?[g,m,p]:[g,p,m],k=A({inputs:{x:r},backend:n,attrs:{shape:u?[y,l,f]:[y,f,l]}}),I=A({inputs:{x:i},backend:n,attrs:{shape:w}}),v=n.dataIdMap.get(k.dataId).id,S=n.dataIdMap.get(I.dataId).id,M=u?k.shape[2]:k.shape[1],E=o?I.shape[1]:I.shape[2],x=Math.max(y,g),F=n.makeOutput([x,M,E],k.dtype),O=n.dataIdMap.get(F.dataId).id,T=new Uint8Array(new Int32Array(k.shape).buffer),R=new Uint8Array(new Int32Array(I.shape).buffer);return N(v,T,k.shape.length,S,R,I.shape.length,u,o,O),n.disposeData(k.dataId),n.disposeData(I.dataId),F.shape=_,F}};var T=n(9162);function R(e){const{inputs:{x:t},attrs:{begin:n,size:a},backend:r}=e,[i,u]=s.slice_util.parseSliceParams(t,n,a),o=s.slice_util.isSliceContinous(t.shape,i,u),d=r.readSync(t.dataId),c=r.makeOutput(u,t.dtype),l=s.util.computeStrides(t.shape),p=r.dataIdMap.get(c.dataId);if(o){const e=s.slice_util.computeFlatOffset(i,l);return"string"===t.dtype?p.stringBytes=d.slice(e,e+s.util.sizeFromShape(u)):r.typedArrayFromHeap(c).set(d.subarray(e,e+s.util.sizeFromShape(u))),c}if("string"===t.dtype){const e=(0,T.rT)(d,i,u,t.shape,t.dtype);return p.stringBytes=e,c}const f=r.typedArrayFromHeap(c),m=t.shape.length;if(2===m)!function(e,t,n,a,r){let s=0;const i=a[0],u=a[1],o=i+r[0];for(let a=i;a<o;a++){const i=a*t+u;n.set(e.subarray(i,i+r[1]),s),s+=r[1]}}(d,l[0],f,i,u);else if(3===m)!function(e,t,n,a,r,s){let i=0;const u=r[0],o=r[1],d=r[2],c=u+s[0],l=o+s[1];for(let r=u;r<c;r++)for(let u=o;u<l;u++){const o=r*t+u*n+d;a.set(e.subarray(o,o+s[2]),i),i+=s[2]}}(d,l[0],l[1],f,i,u);else if(4===m)!function(e,t,n,a,r,s,i){let u=0;const o=s[0],d=s[1],c=s[2],l=o+i[0],p=d+i[1],f=c+i[2],m=s[3];for(let s=o;s<l;s++)for(let o=d;o<p;o++)for(let d=c;d<f;d++){const c=s*t+o*n+d*a+m;r.set(e.subarray(c,c+i[3]),u),u+=i[3]}}(d,l[0],l[1],l[2],f,i,u);else{const e=(0,T.rT)(d,i,u,t.shape,t.dtype);f.set(e)}return c}const P={kernelName:s.Slice,backendName:"wasm",kernelFunc:R},C={kernelName:s.BatchToSpaceND,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:i,crops:u}=a,o=i.reduce(((e,t)=>e*t)),d=s.backend_util.getReshaped(r.shape,i,o),c=s.backend_util.getPermuted(d.length,i.length),l=s.backend_util.getReshapedPermuted(r.shape,i,o),p=s.backend_util.getSliceBeginCoords(u,i.length),f=s.backend_util.getSliceSize(l,u,i.length),m=A({inputs:{x:r},backend:n,attrs:{shape:d}}),h=y({inputs:{x:m},backend:n,attrs:{perm:c}}),b=R({inputs:{x:A({inputs:{x:h},backend:n,attrs:{shape:l}})},backend:n,attrs:{begin:p,size:f}});return n.disposeData(m.dataId),n.disposeData(h.dataId),n.disposeData(m.dataId),b}};function D(e){const{inputs:{x:t},attrs:{dtype:n},backend:a}=e,r=a.makeOutput(t.shape,n),s=a.typedArrayFromHeap(t);return a.typedArrayFromHeap(r).set(s),r}const L={kernelName:s.Cast,backendName:"wasm",kernelFunc:D},W=o(s.Ceil);let B;const H={kernelName:s.ClipByValue,backendName:"wasm",setupFunc:function(e){B=e.wasm.cwrap(s.ClipByValue,null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{clipValueMin:s,clipValueMax:i}=a,u=n.dataIdMap.get(r.dataId).id,o=n.makeOutput(r.shape,r.dtype),d=n.dataIdMap.get(o.dataId).id;return B(u,s,i,d),o}};var U=n(796);function z(e){const{inputs:t,backend:n}=e,a=s.util.parseAxisParam(e.attrs.axis,t[0].shape)[0];let r=s.backend_util.computeOutShape(t.map((e=>e.shape)),a);const i=t.filter((e=>s.util.sizeFromShape(e.shape)>0));if(1===i.length)return m({inputs:{x:i[0]},backend:n});const u=n.makeOutput(r,t[0].dtype);if(0===s.util.sizeFromShape(r))return u;const o=i.map((e=>e.shape));if(s.backend_util.assertParamsConsistent(o,a),"string"===i[0].dtype){const e=i.map((e=>{const t=s.util.sizeFromShape(e.shape.slice(a));return A({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),o=e.map((e=>({vals:n.readSync(e.dataId),shape:e.shape})));r=s.backend_util.computeOutShape(e.map((e=>e.shape)),1);const d=1===e[0].shape[0],c=(0,U.j)(o,r,t[0].dtype,d),l=s.backend_util.computeOutShape(i.map((e=>e.shape)),a);return u.shape=l,n.dataIdMap.get(u.dataId).stringBytes=s.backend_util.fromStringArrayToUint8(c),e.forEach((e=>n.disposeData(e.dataId))),u}const d=s.util.sizeFromShape(i[0].shape.slice(0,a));let c=0;const l=i.map((e=>{const t=s.util.sizeFromShape(e.shape.slice(a));return c+=t,t})),p=i.map((e=>n.typedArrayFromHeap(e))),f=n.typedArrayFromHeap(u);for(let e=0;e<d;e++){let t=e*c;for(let n=0;n<p.length;n++){const a=l[n],r=e*a,s=p[n].subarray(r,r+a);f.set(s,t),t+=a}}return u}const j={kernelName:s.Concat,backendName:"wasm",kernelFunc:z};let V;const G={kernelName:s.Conv2D,backendName:"wasm",setupFunc:function(e){V=e.wasm.cwrap(s.Conv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{x:r,filter:i}=t,u=a.dataIdMap.get(r.dataId).id,o=a.dataIdMap.get(i.dataId).id,{strides:d,dilations:c,pad:l,dimRoundingMode:p,dataFormat:f}=n,m=s.backend_util.convertConv2DDataFormat(f),h=s.backend_util.computeConv2DInfo(r.shape,i.shape,d,c,l,p,!1,m),b=h.filterHeight,y=h.filterWidth,g=h.padInfo.top,_=h.padInfo.right,w=h.padInfo.bottom,k=h.padInfo.left,I=h.dilationHeight,v=h.dilationWidth,S=h.strideHeight,M=h.strideWidth,E=h.inChannels,x=h.outChannels,A="SAME"===h.padInfo.type?1:0;if("channelsLast"!==h.dataFormat)throw new Error(`wasm backend Conv2D does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);const F=a.makeOutput(h.outShape,"float32"),N=a.dataIdMap.get(F.dataId).id;return V(u,r.shape[0],r.shape[1],r.shape[2],o,b,y,g,_,w,k,A,I,v,S,M,E,x,N),F}};let q;const $={kernelName:s.Conv2DBackpropInput,backendName:"wasm",setupFunc:function(e){q=e.wasm.cwrap(s.Conv2DBackpropInput,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{dy:r,filter:i}=n,{strides:u,pad:o,dataFormat:d,dimRoundingMode:c,inputShape:l}=a,p=s.backend_util.convertConv2DDataFormat(d),f=s.backend_util.computeConv2DInfo(l,i.shape,u,1,o,c,!1,p),{batchSize:m,filterHeight:h,filterWidth:b,inChannels:y,inHeight:g,inWidth:_,outChannels:w,outHeight:k,outWidth:I,strideHeight:v,strideWidth:S}=f,M=h-1-f.padInfo.top,E=b-1-f.padInfo.left,x="channelsLast"===f.dataFormat,A=s.util.computeStrides(f.inShape),F=s.util.computeStrides(r.shape),[N,O,T]=s.util.computeStrides(i.shape),R=A[0],P=x?A[1]:A[2],C=x?A[2]:1,D=x?1:A[1],L=F[0],W=x?F[1]:F[2],B=x?F[2]:1,H=x?1:F[1],U=t.makeOutput(f.inShape,"float32"),z=t.dataIdMap.get(U.dataId).id,j=t.dataIdMap.get(r.dataId).id,V=t.dataIdMap.get(i.dataId).id;return q(j,V,m,h,b,g,_,y,k,I,w,v,S,M,E,N,O,T,R,P,C,D,L,W,B,H,z),U}},K=o(s.Cos),X=o(s.Cosh);var Q;let Y;!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(Q||(Q={}));const Z={kernelName:s.CropAndResize,backendName:"wasm",setupFunc:function(e){Y=e.wasm.cwrap(s.CropAndResize,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{method:r,extrapolationValue:s,cropSize:i}=a,{image:u,boxes:o,boxInd:d}=n,c=o.shape[0],[l,p]=i,f=[c,l,p,u.shape[3]];let m,h=t.dataIdMap.get(u.dataId);"float32"!==u.dtype&&(m=D({backend:t,inputs:{x:u},attrs:{dtype:"float32"}}),h=t.dataIdMap.get(m.dataId));const b=h.id,y=t.dataIdMap.get(o.dataId).id,g=t.dataIdMap.get(d.dataId).id,_=t.makeOutput(f,"float32"),w=t.dataIdMap.get(_.dataId).id,k=new Uint8Array(new Int32Array(u.shape).buffer);return Y(b,y,g,c,k,l,p,Q[r],s,w),null!=m&&t.disposeData(m.dataId),_}};let J;const ee={kernelName:s.Cumsum,backendName:"wasm",setupFunc:function(e){J=e.wasm.cwrap(s.Cumsum,null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:u,exclusive:o,reverse:d}=r,c=i.shape.length;s.util.assert("float32"===i.dtype||"int32"===i.dtype,(()=>`cumsum does not support ${i.dtype} tensors in the WASM backend`));const l=s.backend_util.getAxesPermutation([u],c);let p=i;null!==l&&(p=y({inputs:{x:i},attrs:{perm:l},backend:n}));const f=s.backend_util.getInnerMostAxes(1,c)[0];s.backend_util.assertAxesAreInnerMostDims("cumsum",[f],c);const m=n.makeOutput(p.shape,p.dtype),h=p.shape[f],b=n.dataIdMap.get(p.dataId).id,g=n.dataIdMap.get(m.dataId).id;J(b,o?1:0,d?1:0,h,g,a[i.dtype]);let _=m;return null!==l&&(_=y({inputs:{x:m},attrs:{perm:s.backend_util.getUndoAxesPermutation(l)},backend:n}),n.disposeData(p.dataId),n.disposeData(m.dataId)),_}};let te;const ne={kernelName:s.DepthToSpace,backendName:"wasm",setupFunc:function(e){te=e.wasm.cwrap(s.DepthToSpace,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{x:r}=n,{blockSize:i,dataFormat:u}=a,o=r.shape[0],d=("NHWC"===u?r.shape[1]:r.shape[2])*i,c=("NHWC"===u?r.shape[2]:r.shape[3])*i,l=("NHWC"===u?r.shape[3]:r.shape[1])/(i*i),p="NHWC"===u?[o,d,c,l]:[o,l,d,c],f=t.makeOutput(p,"float32"),m=t.dataIdMap.get(r.dataId).id,h=new Uint8Array(new Int32Array(s.util.computeStrides(r.shape)).buffer),b=new Uint8Array(new Int32Array(p).buffer),y=new Uint8Array(new Int32Array(s.util.computeStrides(p)).buffer),g=t.dataIdMap.get(f.dataId).id;return te(m,i,"NHWC"===u?1:0,h,r.shape.length-1,b,y,p.length,g),f}};let ae;const re={kernelName:s.DepthwiseConv2dNative,backendName:"wasm",setupFunc:function(e){ae=e.wasm.cwrap(s.DepthwiseConv2dNative,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{x:r,filter:i}=t,u=a.dataIdMap.get(r.dataId).id,o=a.dataIdMap.get(i.dataId).id,{strides:d,dilations:c,pad:l,dimRoundingMode:p}=n,f=null==c?[1,1]:c,m=s.backend_util.computeConv2DInfo(r.shape,i.shape,d,f,l,p,!0),h=m.filterHeight,b=m.filterWidth,y=m.padInfo.top,g=m.padInfo.right,_=m.padInfo.bottom,w=m.padInfo.left,k=m.dilationHeight,I=m.dilationWidth,v=m.strideHeight,S=m.strideWidth,M=m.inChannels,E=m.outChannels,x="SAME"===m.padInfo.type?1:0;if("channelsLast"!==m.dataFormat)throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${m.dataFormat}'. Please use 'channelsLast'.`);const A=a.makeOutput(m.outShape,"float32"),F=a.dataIdMap.get(A.dataId).id;return ae(u,r.shape[0],r.shape[1],r.shape[2],o,h,b,y,g,_,w,x,k,I,v,S,M,E,F),A}},se=o(s.Elu),ie=c(s.Equal,0,"bool"),ue=o(s.Exp,"float32");function oe(e){const{inputs:t,attrs:n,backend:a}=e,{input:r}=t,{dim:i}=n,u=r.shape.length,o=r.shape.slice();let d=i;return i<0&&(s.util.assert(-(u+1)<=i,(()=>`Axis must be in the interval [${-(u+1)}, ${u}]`)),d=u+i+1),o.splice(d,0,1),A({inputs:{x:r},backend:a,attrs:{shape:o}})}const de={kernelName:s.ExpandDims,backendName:"wasm",kernelFunc:oe};function ce(e){const{attrs:{shape:t,value:n,dtype:a},backend:r}=e,s=r.makeOutput(t,a);return r.typedArrayFromHeap(s).fill(n),s}const le={kernelName:s.Fill,backendName:"wasm",kernelFunc:ce};let pe;const fe={kernelName:s.FlipLeftRight,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n}=e,{image:a}=t,r=n.makeOutput(a.shape,a.dtype),s=n.dataIdMap.get(a.dataId).id,i=n.dataIdMap.get(r.dataId).id,[u,o,d,c]=a.shape;return pe(s,u,o,d,c,i),r},setupFunc:function(e){pe=e.wasm.cwrap(s.FlipLeftRight,null,["number","number","number","number","number","number"])}},me=o(s.Floor),he=c(s.FloorDiv);let be;const ye={kernelName:s.FusedBatchNorm,backendName:"wasm",setupFunc:function(e){be=e.wasm.cwrap(s.FusedBatchNorm,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{varianceEpsilon:r}=a,{x:i,mean:u,variance:o,offset:d,scale:c}=n,l=t.dataIdMap.get(i.dataId).id,p=t.dataIdMap.get(u.dataId).id,f=t.dataIdMap.get(o.dataId).id,m=null!=d?t.dataIdMap.get(d.dataId).id:0,h=null!=c?t.dataIdMap.get(c.dataId).id:0,b=t.makeOutput(i.shape,i.dtype);if(0===s.util.sizeFromShape(i.shape))return b;const y=t.dataIdMap.get(b.dataId).id;return be(l,p,f,m,h,r,y),b}};let ge;const _e={kernelName:s.FusedConv2D,backendName:"wasm",setupFunc:function(e){ge=e.wasm.cwrap(s.FusedConv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{x:i,filter:u,bias:o,preluActivationWeights:d}=t,{strides:c,pad:l,dilations:p,dataFormat:f,dimRoundingMode:m,activation:h,leakyreluAlpha:b}=n,y=s.backend_util.computeConv2DInfo(i.shape,u.shape,c,p,l,m),g=r[h];if(null==g)throw new Error(`${h} activation not yet supported for FusedConv2D in the wasm backend.`);const _=a.dataIdMap.get(i.dataId).id,w=a.dataIdMap.get(u.dataId).id,k=y.outChannels;let I=0;if(null!=o){const e=a.dataIdMap.get(o.dataId);if(1!==e.shape.length)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==k)throw new Error(`FusedConv2D bias shape (${e.shape}) does not match the number of output channels (${k})`);I=e.id}const v=y.filterHeight,S=y.filterWidth,M=y.padInfo.top,E=y.padInfo.right,x=y.padInfo.bottom,A=y.padInfo.left,F=y.dilationHeight,N=y.dilationWidth,O=y.strideHeight,T=y.strideWidth,R=y.inChannels,P="SAME"===y.padInfo.type?1:0,C=y.batchSize,D=y.inHeight,L=y.inWidth;if("NHWC"!==f)throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${f}'. Please use 'NHWC'.`);const W=a.makeOutput(y.outShape,"float32"),B=a.dataIdMap.get(W.dataId).id,H=null==d?0:a.dataIdMap.get(d.dataId).id;return ge(_,C,D,L,w,v,S,I,M,E,x,A,P,F,N,O,T,R,k,g,H,b||0,B),W}};let we;const ke={kernelName:s.FusedDepthwiseConv2D,backendName:"wasm",setupFunc:function(e){we=e.wasm.cwrap(s.FusedDepthwiseConv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{x:i,filter:u,bias:o,preluActivationWeights:d}=t,{strides:c,pad:l,dilations:p,dataFormat:f,dimRoundingMode:m,activation:h,leakyreluAlpha:b}=n,y=s.backend_util.computeConv2DInfo(i.shape,u.shape,c,p,l,m,!0),g=r[h];if(null==g)throw new Error(`${h} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);const _=a.dataIdMap.get(i.dataId).id,w=a.dataIdMap.get(u.dataId).id,k=y.outChannels;let I=0;if(null!=o){const e=a.dataIdMap.get(o.dataId);if(1!==e.shape.length)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==k)throw new Error(`FusedDepthwiseConv2D bias shape (${e.shape}) does not match the number of output channels (${k})`);I=e.id}const v=y.filterHeight,S=y.filterWidth,M=y.padInfo.top,E=y.padInfo.right,x=y.padInfo.bottom,A=y.padInfo.left,F=y.dilationHeight,N=y.dilationWidth,O=y.strideHeight,T=y.strideWidth,R=y.inChannels,P="SAME"===y.padInfo.type?1:0,C=y.batchSize,D=y.inHeight,L=y.inWidth;if("NHWC"!==f)throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${f}'. Please use 'NHWC'.`);const W=a.makeOutput(y.outShape,"float32"),B=a.dataIdMap.get(W.dataId).id,H=null==d?0:a.dataIdMap.get(d.dataId).id;return we(_,C,D,L,w,v,S,I,M,E,x,A,P,F,N,O,T,R,k,g,H,b||0,B),W}};let Ie;const ve={kernelName:s.GatherNd,backendName:"wasm",setupFunc:function(e){Ie=e.wasm.cwrap(s.GatherNd,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){const{backend:t,inputs:n}=e,{params:r,indices:i}=n,[u,o,d,c]=s.gather_util.prepareAndValidate(r,i),l=t.makeOutput(u,r.dtype);if(0===o)return l;const p=i.shape,f=p[p.length-1],m=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(i.dataId).id,b=new Uint8Array(new Int32Array(c).buffer),y=t.dataIdMap.get(l.dataId).id;return Ie(m,a[r.dtype],h,o,f,d,b,y),l}};let Se;const Me={kernelName:s.GatherV2,backendName:"wasm",setupFunc:function(e){Se=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{x:i,indices:u}=n,{axis:o,batchDims:d}=r,c=s.util.parseAxisParam(o,i.shape)[0],l=t.readSync(u.dataId),p=i.shape[c];for(let e=0;e<l.length;++e){const t=l[e];s.util.assert(t<=p-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${p-1}]`))}const f=s.backend_util.segment_util.collectGatherOpShapeInfo(i,u,c,d),m=A({inputs:{x:i},attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]},backend:t}),h=s.util.sizeFromShape(u.shape),b=A({inputs:{x:u},attrs:{shape:[f.batchSize,h/f.batchSize]},backend:t}),y=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],g=t.makeOutput(y,i.dtype);if(0===s.util.sizeFromShape(i.shape))return g;const _=m.shape.length-1,w=t.dataIdMap.get(m.dataId).id,k=t.dataIdMap.get(b.dataId).id,I=t.dataIdMap.get(g.dataId).id,v=new Uint8Array(new Int32Array(s.util.computeStrides(m.shape)).buffer),S=new Uint8Array(new Int32Array(s.util.computeStrides(y)).buffer);return Se(w,a[i.dtype],v,_,k,f.batchSize,S,I),t.disposeData(m.dataId),t.disposeData(b.dataId),g.shape=f.outputShape,g}},Ee=c(s.Greater,0,"bool"),xe=c(s.GreaterEqual,0,"bool");let Ae;const Fe={kernelName:s.LeakyRelu,backendName:"wasm",setupFunc:function(e){Ae=e.wasm.cwrap(s.LeakyRelu,null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:{x:t},attrs:{alpha:n},backend:r}=e,i=r.dataIdMap.get(t.dataId).id,u=r.makeOutput(t.shape,"float32");if(0!==s.util.sizeFromShape(t.shape)){const e=r.dataIdMap.get(u.dataId).id;Ae(i,a[t.dtype],n,e)}return u}},Ne=c(s.Less,0,"bool"),Oe=c(s.LessEqual,0,"bool"),Te=o(s.Log),Re=c(s.LogicalAnd,0,"bool");let Pe;const Ce={kernelName:s.Max,backendName:"wasm",setupFunc:function(e){Pe=e.wasm.cwrap(s.Max,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{reductionIndices:i,keepDims:u}=r,{x:o}=n;let d=t.dataIdMap.get(o.dataId).id,c=o;const{transposed:l,axes:p,originalAxes:f,inputWasTransposed:m}=_(o,i,t);m&&(c=l,d=t.dataIdMap.get(l.dataId).id);const h=c.shape.length;s.backend_util.assertAxesAreInnerMostDims("max",p,h);const[b,y]=s.backend_util.computeOutAndReduceShapes(c.shape,p),g=s.util.sizeFromShape(y),w=t.makeOutput(b,o.dtype);if(0!==s.util.sizeFromShape(c.shape)){const e=t.dataIdMap.get(w.dataId).id;Pe(d,a[o.dtype],g,e)}if(m&&t.disposeData(l.dataId),u){const e=s.backend_util.expandShapeToKeepDim(w.shape,f);w.shape=e}return w}},De=c(s.Maximum);let Le;const We={kernelName:s.MaxPool,backendName:"wasm",setupFunc:function(e){Le=e.wasm.cwrap(s.MaxPool,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,r=t.x,i=a.dataIdMap.get(r.dataId).id;s.util.assert("float32"===r.dtype,(()=>`Error in MaxPool: only float32 input is supported. Got ${r.dtype}.`));const{filterSize:u,strides:o,pad:d,dimRoundingMode:c}=n,l=s.backend_util.computePool2DInfo(r.shape,u,o,1,d,c),p=l.filterHeight,f=l.filterWidth,m=l.padInfo.top,h=l.padInfo.right,b=l.padInfo.bottom,y=l.padInfo.left,g=l.dilationHeight,_=l.dilationWidth,w=l.strideHeight,k=l.strideWidth,I=l.inChannels,v=l.outChannels;if("channelsLast"!==l.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${l.dataFormat}'. Please use 'channelsLast'.`);const S=a.makeOutput(l.outShape,"float32"),M=a.dataIdMap.get(S.dataId).id;return Le(i,r.shape[0],r.shape[1],r.shape[2],p,f,m,h,b,y,g,_,w,k,I,v,M),S}};let Be;const He={kernelName:s.Mean,backendName:"wasm",setupFunc:function(e){Be=e.wasm.cwrap(s.Mean,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{axis:r,keepDims:i}=a,{x:u}=n,o=t.dataIdMap.get(u.dataId).id;let d=o,c=u;const{transposed:l,axes:p,originalAxes:f,inputWasTransposed:m}=_(u,r,t);let h=p;if(m){const e=t.dataIdMap.get(l.dataId).id;e!==o&&(c=l,d=e,h=s.backend_util.getInnerMostAxes(h.length,c.shape.length))}s.backend_util.assertAxesAreInnerMostDims("mean",h,c.shape.length);const[b,y]=s.backend_util.computeOutAndReduceShapes(c.shape,h),g=s.util.sizeFromShape(y);let w=c;"float32"!==c.dtype&&(w=D({backend:t,inputs:{x:c},attrs:{dtype:"float32"}}),d=t.dataIdMap.get(w.dataId).id);const k=t.makeOutput(b,"float32");if(0!==s.util.sizeFromShape(c.shape)){const e=t.dataIdMap.get(k.dataId).id;Be(d,g,e)}if(m&&t.disposeData(l.dataId),i){const e=s.backend_util.expandShapeToKeepDim(k.shape,f);k.shape=e}return"float32"!==c.dtype&&t.disposeData(w.dataId),k}};let Ue;const ze={kernelName:s.Min,backendName:"wasm",setupFunc:function(e){Ue=e.wasm.cwrap(s.Min,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:u}=r,{x:o}=n,d=t.dataIdMap.get(o.dataId).id;let c=d,l=o;const{transposed:p,axes:f,originalAxes:m,inputWasTransposed:h}=_(o,i,t);if(h){const e=t.dataIdMap.get(p.dataId).id;e!==d&&(l=p,c=e)}const b=l.shape.length;s.backend_util.assertAxesAreInnerMostDims("min",f,b);const[y,g]=s.backend_util.computeOutAndReduceShapes(l.shape,f),w=s.util.sizeFromShape(g),k=t.makeOutput(y,l.dtype);if(0!==s.util.sizeFromShape(l.shape)){const e=t.dataIdMap.get(k.dataId).id;Ue(c,a[o.dtype],w,e)}if(h&&t.disposeData(p.dataId),u){const e=s.backend_util.expandShapeToKeepDim(k.shape,m);k.shape=e}return k}},je=c(s.Minimum);var Ve;let Ge;!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(Ve||(Ve={}));const qe={kernelName:s.MirrorPad,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:n,attrs:{paddings:r,mode:s}}=e,i=r.map(((e,n)=>e[0]+t.shape[n]+e[1])),u=n.dataIdMap.get(t.dataId).id,o=n.makeOutput(i,t.dtype),d=n.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(t.shape).buffer),l=r.map((e=>e[0])),p=r.map((e=>e[1])),f=new Uint8Array(new Int32Array(l).buffer),m=new Uint8Array(new Int32Array(p).buffer);return Ge(u,c,t.shape.length,a[t.dtype],f,m,Ve[s],d),o},setupFunc:function(e){Ge=e.wasm.cwrap(s.MirrorPad,null,["number","array","number","number","array","array","number","number"])}},$e=c(s.Multiply),Ke=o(s.Neg);function Xe(e,t){const n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),a=n[0],r=n[1],s=n[2],i=n[3];return e.wasm._free(t),{pSelectedIndices:a,selectedSize:r,pSelectedScores:s,pValidOutputs:i}}let Qe;const Ye={kernelName:s.NonMaxSuppressionV3,backendName:"wasm",setupFunc:function(e){Qe=e.wasm.cwrap(s.NonMaxSuppressionV3,"number",["number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{iouThreshold:r,maxOutputSize:s,scoreThreshold:i}=a,{boxes:u,scores:o}=n,d=t.dataIdMap.get(u.dataId).id,c=t.dataIdMap.get(o.dataId).id,l=Qe(d,c,s,r,i),{pSelectedIndices:p,selectedSize:f,pSelectedScores:m,pValidOutputs:h}=Xe(t,l);return t.wasm._free(m),t.wasm._free(h),t.makeOutput([f],"int32",p)}};let Ze;const Je={kernelName:s.NonMaxSuppressionV4,backendName:"wasm",setupFunc:function(e){Ze=e.wasm.cwrap(s.NonMaxSuppressionV4,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{iouThreshold:r,maxOutputSize:s,scoreThreshold:i,padToMaxOutputSize:u}=a,{boxes:o,scores:d}=n,c=t.dataIdMap.get(o.dataId).id,l=t.dataIdMap.get(d.dataId).id,p=Ze(c,l,s,r,i,u),{pSelectedIndices:f,selectedSize:m,pSelectedScores:h,pValidOutputs:b}=Xe(t,p);return t.wasm._free(h),[t.makeOutput([m],"int32",f),t.makeOutput([],"int32",b)]}};let et;const tt={kernelName:s.NonMaxSuppressionV5,backendName:"wasm",setupFunc:function(e){et=e.wasm.cwrap(s.NonMaxSuppressionV5,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{iouThreshold:r,maxOutputSize:s,scoreThreshold:i,softNmsSigma:u}=a,{boxes:o,scores:d}=n,c=t.dataIdMap.get(o.dataId).id,l=t.dataIdMap.get(d.dataId).id,p=et(c,l,s,r,i,u),{pSelectedIndices:f,selectedSize:m,pSelectedScores:h,pValidOutputs:b}=Xe(t,p);return t.wasm._free(b),[t.makeOutput([m],"int32",f),t.makeOutput([m],"float32",h)]}},nt=c(s.NotEqual,0,"bool");let at;const rt={kernelName:s.OneHot,backendName:"wasm",setupFunc:function(e){at=e.wasm.cwrap(s.OneHot,null,["number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r}=t,{depth:s,onValue:i,offValue:u}=a,o=n.makeOutput([...r.shape,s],"int32"),d=n.dataIdMap.get(o.dataId).id,c=n.dataIdMap.get(r.dataId).id;return at(c,s,i,u,d),o}},st={kernelName:s.OnesLike,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:n}=e,a=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(a).fill(1),a}},it={kernelName:s.Pack,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a;if(1===t.length)return oe({inputs:{input:t[0]},backend:n,attrs:{dim:r}});const i=t[0].shape,u=t[0].dtype;t.forEach((e=>{s.util.assertShapesMatch(i,e.shape,"All tensors passed to stack must have matching shapes"),s.util.assert(u===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const o=[],d=z({inputs:t.map((e=>{const t=oe({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((e=>n.disposeData(e.dataId))),d}};let ut;const ot={kernelName:s.PadV2,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:n,attrs:{paddings:r,constantValue:i}}=e,u=r.map(((e,n)=>e[0]+t.shape[n]+e[1]));if(0===s.util.sizeFromShape(t.shape))return ce({backend:n,attrs:{shape:u,value:i,dtype:t.dtype}});const o=n.dataIdMap.get(t.dataId).id,d=n.makeOutput(u,t.dtype),c=n.dataIdMap.get(d.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),p=r.map((e=>e[0])),f=r.map((e=>e[1])),m=new Uint8Array(new Int32Array(p).buffer),h=new Uint8Array(new Int32Array(f).buffer);return ut(o,l,t.shape.length,a[t.dtype],m,h,i,c),d},setupFunc:function(e){ut=e.wasm.cwrap(s.PadV2,null,["number","array","number","number","array","array","number","number"])}},dt=c(s.Pow);let ct;const lt={kernelName:s.Prelu,backendName:"wasm",setupFunc:function(e){ct=e.wasm.cwrap(s.Prelu,null,["number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a,alpha:r}=t,s=n.dataIdMap.get(a.dataId).id,i=n.dataIdMap.get(r.dataId).id;let u=s;const o=a;let d=o;"float32"!==o.dtype&&(d=D({backend:n,inputs:{x:a},attrs:{dtype:"float32"}}),u=n.dataIdMap.get(d.dataId).id);const c=n.makeOutput(a.shape,"float32"),l=n.dataIdMap.get(c.dataId).id;return ct(u,i,l),"float32"!==o.dtype&&n.disposeData(d.dataId),c}};let pt;const ft={kernelName:s.Prod,backendName:"wasm",setupFunc:function(e){pt=e.wasm.cwrap(s.Prod,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:u}=r,{x:o}=n,d=t.dataIdMap.get(o.dataId).id;let c=d,l=o;const{transposed:p,axes:f,originalAxes:m,inputWasTransposed:h}=_(o,i,t);let b=f;if(h){const e=t.dataIdMap.get(p.dataId).id;e!==d&&(l=p,c=e,b=s.backend_util.getInnerMostAxes(b.length,l.shape.length))}s.backend_util.assertAxesAreInnerMostDims("prod",b,l.shape.length);const[y,g]=s.backend_util.computeOutAndReduceShapes(l.shape,b),w=s.util.sizeFromShape(g),k=t.makeOutput(y,l.dtype);if(0!==s.util.sizeFromShape(l.shape)){const e=t.dataIdMap.get(k.dataId).id;pt(c,w,a[k.dtype],e)}if(h&&t.disposeData(p.dataId),u){const e=s.backend_util.expandShapeToKeepDim(k.shape,m);k.shape=e}return k}};var mt=n(9318);const ht={kernelName:s.Range,backendName:"wasm",kernelFunc:e=>{const{backend:t,attrs:n}=e,{start:a,stop:r,step:s,dtype:i}=n,u=(0,mt.b)(a,r,s,i),o=t.makeOutput([u.length],i);return t.typedArrayFromHeap(o).set(u),o}},bt=c(s.RealDiv),yt=o(s.Relu),gt=o(s.Relu6);let _t;const wt={kernelName:s.ResizeBilinear,backendName:"wasm",setupFunc:function(e){_t=e.wasm.cwrap(s.ResizeBilinear,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{images:r}=n,{alignCorners:i,halfPixelCenters:u,size:o}=a,[d,c]=o,[l,p,f,m]=r.shape,h=[l,d,c,m];let b,y=t.dataIdMap.get(r.dataId);"float32"!==y.dtype&&(b=D({backend:t,inputs:{x:r},attrs:{dtype:"float32"}}),y=t.dataIdMap.get(b.dataId));const g=y.id,_=t.makeOutput(h,"float32");if(0===s.util.sizeFromShape(r.shape))return _;const w=t.dataIdMap.get(_.dataId).id;return _t(g,l,p,f,m,d,c,i?1:0,u?1:0,w),null!=b&&t.disposeData(b.dataId),_}};let kt;const It={kernelName:s.Reverse,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dims:i}=a,u=s.util.parseAxisParam(i,r.shape);if(0===r.shape.length)return m({inputs:{x:r},backend:n});const o=n.makeOutput(r.shape,r.dtype),d=n.dataIdMap.get(r.dataId).id,c=n.dataIdMap.get(o.dataId).id,l=new Uint8Array(new Int32Array(u).buffer),p=new Uint8Array(new Int32Array(r.shape).buffer);kt(d,l,u.length,p,r.shape.length,c);const f=A({inputs:{x:o},attrs:{shape:r.shape},backend:n});return n.disposeData(o.dataId),f},setupFunc:function(e){kt=e.wasm.cwrap(s.Reverse,null,["number","array","number","array","number","number"])}};let vt;const St={kernelName:s.RotateWithOffset,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r}=t,{radians:i,fillValue:u,center:o}=a,d=n.makeOutput(r.shape,r.dtype),c=n.dataIdMap.get(r.dataId).id,l=n.dataIdMap.get(d.dataId).id,[p,f,m,h]=r.shape,[b,y]=s.backend_util.getImageCenter(o,f,m),g="number"==typeof u?[u,u,u,0===u?0:255]:[...u,255],_=new Uint8Array(new Int32Array(g).buffer);return vt(c,p,f,m,h,i,b,y,_,g.length,l),d},setupFunc:function(e){vt=e.wasm.cwrap(s.RotateWithOffset,null,["number","number","number","number","number","number","number","number","array","number","number"])}},Mt=o(s.Round),Et=o(s.Rsqrt);let xt;const At={kernelName:s.ScatterNd,backendName:"wasm",setupFunc:function(e){xt=e.wasm.cwrap(s.ScatterNd,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{indices:i,updates:u}=n,{shape:o}=r,d=t.makeOutput(o,u.dtype);if(0===s.util.sizeFromShape(o))return d;const{sliceRank:c,numUpdates:l,sliceSize:p,strides:f,outputSize:m}=s.scatter_util.calculateShapes(u,i,o),h=t.dataIdMap.get(i.dataId).id,b=t.dataIdMap.get(u.dataId).id,y=new Uint8Array(new Int32Array(f).buffer),g=t.dataIdMap.get(d.dataId).id;return xt(h,b,a[u.dtype],c,l,p,y,m,g),d}};let Ft;const Nt={kernelName:s.Select,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:a,t:r,e:i}=t,u=n.dataIdMap.get(a.dataId).id,o=n.dataIdMap.get(r.dataId).id,d=n.dataIdMap.get(i.dataId).id,c=n.makeOutput(r.shape,r.dtype),l=n.dataIdMap.get(c.dataId).id,p=a.shape.length,f=r.shape.length,m=0===p||p>1||1===f?1:s.util.sizeFromShape(r.shape.slice(1));return Ft(u,o,d,m,l),c},setupFunc:function(e){Ft=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}};let Ot;const Tt={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){Ot=e.wasm.cwrap(s.Sigmoid,null,["number","number"])},kernelFunc:function(e){const{backend:t,inputs:{x:n}}=e,a=t.dataIdMap.get(n.dataId).id,r=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(r.dataId).id;return 0===s.util.sizeFromShape(r.shape)||Ot(a,i),r}},Rt=o(s.Sin);let Pt;const Ct={kernelName:s.Softmax,backendName:"wasm",setupFunc:function(e){Pt=e.wasm.cwrap(s.Softmax,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:{logits:n},attrs:{dim:a}}=e,r=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(n.shape,n.dtype),u=t.dataIdMap.get(i.dataId).id,o=n.shape[a],d=s.util.sizeFromShape(n.shape)/o;return 0===s.util.sizeFromShape(i.shape)||Pt(r,u,o,d),i}},Dt={kernelName:s.SpaceToBatchND,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:i,paddings:u}=a,o=s.util.sizeFromShape(i),d=[[0,0]];d.push(...u);for(let e=1+i.length;e<r.shape.length;++e)d.push([0,0]);const c=ot.kernelFunc({inputs:{x:r},backend:n,attrs:{paddings:d,constantValue:0}}),l=s.backend_util.getReshaped(c.shape,i,o,!1),p=s.backend_util.getPermuted(l.length,i.length,!1),f=s.backend_util.getReshapedPermuted(c.shape,i,o,!1),m=A({inputs:{x:c},backend:n,attrs:{shape:l}}),h=y({inputs:{x:m},backend:n,attrs:{perm:p}}),b=A({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeData(c.dataId),n.disposeData(m.dataId),n.disposeData(h.dataId),b}};let Lt;const Wt={kernelName:s.SparseFillEmptyRows,backendName:"wasm",setupFunc:function(e){Lt=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n}=e,{indices:r,values:i,denseShape:u,defaultValue:o}=n,d=r.shape[0],c=r.shape[1],l=t.readSync(u.dataId)[0],p=[d+l,c],f=t.dataIdMap.get(r.dataId).id,m=t.dataIdMap.get(i.dataId).id,h=t.dataIdMap.get(o.dataId).id,b=t.makeOutput(p,r.dtype),y=t.dataIdMap.get(b.dataId).id,g=t.makeOutput(p.slice(0,1),i.dtype),_=t.dataIdMap.get(g.dataId).id,w=t.makeOutput([l],"bool"),k=t.dataIdMap.get(w.dataId).id,I=t.makeOutput([d],r.dtype),v=t.dataIdMap.get(I.dataId).id,S=t.makeOutput([4],"int32"),M=t.dataIdMap.get(S.dataId).id,E=Lt(f,m,a[i.dtype],d,l,c,h,y,_,k,v,M),x=t.readSync(S.dataId);let A;switch(x[0]){case 1:A=s.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(x[1]);break;case 2:A=s.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(x[1],x[2]);break;case 3:A=s.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(x[1],x[2],x[3]);break;default:A=""}if(t.disposeData(S.dataId),A)throw t.disposeData(b.dataId),t.disposeData(g.dataId),t.disposeData(w.dataId),t.disposeData(I.dataId),new Error(A);let F=b,N=g;return E!==p[0]&&(F=R({inputs:{x:b},attrs:{begin:0,size:[E,c]},backend:t}),N=R({inputs:{x:g},attrs:{begin:0,size:E},backend:t}),t.disposeData(b.dataId),t.disposeData(g.dataId)),[F,N,w,I]}};let Bt;const Ht={kernelName:s.SparseReshape,backendName:"wasm",setupFunc:function(e){Bt=e.wasm.cwrap(s.SparseReshape,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n}=e,{inputIndices:a,inputShape:r,newShape:i}=n;if(2!==a.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${a.shape}`);if(1!==r.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${r.shape}`);if(1!==i.shape.length)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const u=t.dataIdMap.get(a.dataId).id,o=t.dataIdMap.get(r.dataId).id,d=t.dataIdMap.get(i.dataId).id,c=a.shape[0],l=s.util.sizeFromShape(i.shape),p=t.makeOutput([c,l],a.dtype),f=t.dataIdMap.get(p.dataId).id,m=t.makeOutput([l],i.dtype),h=t.dataIdMap.get(m.dataId).id,b=t.makeOutput([3],"int32"),y=t.dataIdMap.get(b.dataId).id;Bt(u,o,d,c,f,h,y);const g=t.readSync(b.dataId);let _;switch(g[0]){case 0:_=s.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(g[1],g[2]);break;case 1:_=s.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(g[1],g[2]);break;case 2:_=s.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:{const e=Array.from(t.readSync(r.dataId)),n=Array.from(t.readSync(m.dataId));_=s.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(e,n);break}case 4:{const e=Array.from(t.readSync(r.dataId)),n=Array.from(t.readSync(m.dataId));_=s.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(e,n);break}default:_=""}if(t.disposeData(b.dataId),_)throw t.disposeData(p.dataId),t.disposeData(m.dataId),new Error(_);return[p,m]}};let Ut;function zt(e){Ut=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function jt(e,t){const{backend:n,inputs:r}=e,{data:i,indices:u,segmentIds:o}=r,d=u.shape[0],c=n.readSync(o.dataId,d-1,d)[0],l=d>0?c+1:0;if(l<0)throw new Error(s.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());const p=i.shape.slice();p[0]=l;const f=n.dataIdMap.get(i.dataId).id,m=n.dataIdMap.get(u.dataId).id,h=n.dataIdMap.get(o.dataId).id,b=n.makeOutput(p,i.dtype),y=n.dataIdMap.get(b.dataId).id,g=n.makeOutput([4],"int32"),_=n.dataIdMap.get(g.dataId).id;Ut(f,a[i.dtype],i.shape[0],m,h,y,_,t,0);const w=n.readSync(g.dataId);let k;switch(w[0]){case 0:k=s.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break;case 1:k=s.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break;case 2:k=s.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(w[1],w[2]);break;case 3:k=s.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(w[1],w[2],w[3]);break;default:k=""}if(n.disposeData(g.dataId),k)throw n.disposeData(b.dataId),new Error(k);return b}const Vt={kernelName:s.SparseSegmentMean,backendName:"wasm",setupFunc:zt,kernelFunc:function(e){return jt(e,!0)}},Gt={kernelName:s.SparseSegmentSum,backendName:"wasm",setupFunc:zt,kernelFunc:function(e){return jt(e,!1)}},qt={kernelName:s.SplitV,backendName:"wasm",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{x:r}=t,{numOrSizeSplits:i,axis:u}=n,o=s.util.parseAxisParam(u,r.shape)[0],d=s.backend_util.prepareSplitSize(r,i,o),c=new Array(r.shape.length).fill(0),l=r.shape.slice();return d.map((e=>{const t=[...l];t[o]=e;const n=R({inputs:{x:r},attrs:{begin:c,size:t},backend:a});return c[o]+=e,n}))}},$t=o(s.Sqrt),Kt=o(s.Square),Xt=c(s.SquaredDifference);let Qt;const Yt={kernelName:s.Step,backendName:"wasm",setupFunc:function(e){Qt=e.wasm.cwrap(s.Step,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{alpha:s}=r,{x:i}=n,u=t.dataIdMap.get(i.dataId).id,o=t.makeOutput(i.shape,i.dtype),d=t.dataIdMap.get(o.dataId).id;return Qt(u,s,a[i.dtype],d),o}};let Zt;const Jt={kernelName:s.StridedSlice,backendName:"wasm",setupFunc:function(e){Zt=e.wasm.cwrap(s.StridedSlice,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{x:r}=n,{begin:i,end:u,strides:o,beginMask:d,endMask:c,ellipsisMask:l,newAxisMask:p,shrinkAxisMask:f}=a,{finalShapeSparse:m,finalShape:h,isIdentity:b,sliceDim0:y,isSimpleSlice:g,begin:_,end:w,strides:k}=s.slice_util.sliceInfo(r.shape,i,u,o,d,c,l,p,f);let I;if(b)I=A({inputs:{x:r},backend:t,attrs:{shape:h}});else if(y||g){s.util.assert(r.shape.length>=1,(()=>`Input must have rank at least 1, got: ${r.shape.length}`));const e=s.slice_util.computeOutShape(_,w,k),n=R({inputs:{x:r},backend:t,attrs:{begin:_,size:e}});I=A({inputs:{x:n},backend:t,attrs:{shape:h}}),t.disposeData(n.dataId)}else{const e=t.makeOutput(m,"float32"),n=t.dataIdMap.get(r.dataId).id,a=new Uint8Array(new Int32Array(s.util.computeStrides(r.shape)).buffer),i=new Uint8Array(new Int32Array(_).buffer),u=new Uint8Array(new Int32Array(w).buffer),o=new Uint8Array(new Int32Array(k).buffer),d=new Uint8Array(new Int32Array(m).buffer),c=new Uint8Array(new Int32Array(s.util.computeStrides(m)).buffer),l=t.dataIdMap.get(e.dataId).id;Zt(n,a,r.shape.length,i,u,o,d,c,m.length,l),I=A({inputs:{x:e},backend:t,attrs:{shape:h}}),t.disposeData(e.dataId)}return I}},en=c(s.Sub);let tn;const nn={kernelName:s.Sum,backendName:"wasm",setupFunc:function(e){tn=e.wasm.cwrap(s.Sum,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:u}=r,{x:o}=n,d=t.dataIdMap.get(o.dataId).id;let c=d,l=o;const{transposed:p,axes:f,originalAxes:m,inputWasTransposed:h}=_(o,i,t);let b=f;if(h){const e=t.dataIdMap.get(p.dataId).id;e!==d&&(l=p,c=e,b=s.backend_util.getInnerMostAxes(b.length,l.shape.length))}s.backend_util.assertAxesAreInnerMostDims("sum",b,l.shape.length);const[y,g]=s.backend_util.computeOutAndReduceShapes(l.shape,b),w=s.util.sizeFromShape(g),k=t.makeOutput(y,l.dtype);if(0!==s.util.sizeFromShape(l.shape)){const e=t.dataIdMap.get(k.dataId).id;tn(c,w,a[k.dtype],e)}if(h&&t.disposeData(p.dataId),u){const e=s.backend_util.expandShapeToKeepDim(k.shape,m);k.shape=e}return k}},an=o(s.Tan),rn=o(s.Tanh);let sn;const un={kernelName:s.Tile,backendName:"wasm",setupFunc:function(e){sn=e.wasm.cwrap(s.Tile,null,["number","array","number","array","number","number"])},kernelFunc:function(e){const{inputs:t,backend:n,attrs:r}=e,{x:s}=t,i=n.dataIdMap.get(s.dataId).id,{reps:u}=r,o=new Array(s.shape.length);for(let e=0;e<o.length;e++)o[e]=s.shape[e]*u[e];const d=new Uint8Array(new Int32Array(s.shape).buffer),c=new Uint8Array(new Int32Array(o).buffer),l=n.makeOutput(o,s.dtype),p=n.dataIdMap.get(l.dataId).id;return sn(i,d,s.shape.length,c,o.length,a[l.dtype],p),l}};let on;const dn={kernelName:s.TopK,backendName:"wasm",setupFunc:function(e){on=e.wasm.cwrap(s.TopK,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:r}=e,{k:s,sorted:i}=n,u=t.dataIdMap.get(r.dataId).id,o=new Uint8Array(new Int32Array(r.shape).buffer),d=r.shape.slice();d[d.length-1]=s;const c=t.makeOutput(d,r.dtype),l=t.dataIdMap.get(c.dataId).id,p=t.makeOutput(d,"int32"),f=t.dataIdMap.get(p.dataId).id;return on(u,o,r.shape.length,a[r.dtype],s,i,l,f),[c,p]}};let cn;const ln={kernelName:s.Transform,backendName:"wasm",setupFunc:function(e){cn=e.wasm.cwrap(s.Transform,null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:n,attrs:a}=e,{image:r,transforms:i}=n,{interpolation:u,fillMode:o,fillValue:d,outputShape:c}=a,[l,p,f,m]=r.shape,[h,b]=null!=c?c:[p,f],y=[l,h,b,m],g=new Uint8Array(new Int32Array(s.util.computeStrides(r.shape)).buffer),_=t.makeOutput(y,r.dtype),w=t.dataIdMap.get(_.dataId).id,k=t.dataIdMap.get(r.dataId).id,I=t.dataIdMap.get(i.dataId).id,v="nearest"===u?1:2;let S;switch(o){case"constant":S=1;break;case"reflect":S=2;break;case"wrap":S=3;break;case"nearest":S=4;break;default:S=1}return cn(k,I,i.shape[0]>1,l,h,b,m,f,p,g,r.shape.length-1,v,S,d,w),_}},pn={kernelName:s.Unpack,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{value:r}=t;let{axis:s}=a;s<0&&(s+=r.shape.length);const i=r.shape[s],u=r.shape.length,o=new Array(u-1);let d=0;for(let e=0;e<u;e++)e!==s&&(o[d++]=r.shape[e]);const c=new Array(i),l=new Array(u).fill(0),p=r.shape.slice();p[s]=1;for(let e=0;e<c.length;e++)l[s]=e,c[e]=R({inputs:{x:r},attrs:{begin:l,size:p},backend:n});return c.map((({dataId:e,dtype:t})=>({dataId:e,dtype:t,shape:o})))}},fn={kernelName:s.ZerosLike,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:n}=e,a=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(a).fill(0),a}},mn=[u,d,l,f,k,v,M,x,O,C,L,W,H,j,G,$,K,X,Z,ee,ne,re,se,ie,ue,de,le,fe,me,he,ye,_e,ke,ve,Me,Ee,xe,h,Fe,Ne,Oe,Te,Re,Ce,De,We,He,ze,je,qe,$e,Ke,Ye,Je,tt,nt,rt,st,it,ot,dt,lt,ft,ht,bt,yt,gt,F,wt,It,St,Mt,Et,At,Nt,Tt,Rt,P,Ct,Dt,Wt,Ht,Vt,Gt,qt,$t,Kt,Xt,Yt,Jt,en,nn,an,rn,un,dn,ln,g,pn,fn];for(const e of mn)(0,s.registerKernel)(e);const hn=(0,s.env)();hn.registerFlag("WASM_HAS_SIMD_SUPPORT",(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])))),hn.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",(async()=>{if(hn.get("IS_NODE"))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(e){return!1}}));var bn=n(2466),yn=n.n(bn),gn=n(1753),_n=n.n(gn);class wn extends s.KernelBackend{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(Fn),Nn=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new s.DataStorage(this,(0,s.engine)())}write(e,t,n){const a={id:this.dataIdNextNumber++};return this.move(a,e,t,n,1),a}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){const t=s.util.now();return e(),{kernelMs:s.util.now()-t}}move(e,t,n,a,r){const i=this.dataIdNextNumber++;if("string"===a){const s=t;return void this.dataIdMap.set(e,{id:i,stringBytes:s,shape:n,dtype:a,memoryOffset:null,refCount:r})}const u=s.util.sizeFromShape(n),o=u*s.util.bytesPerElement(a),d=this.wasm._malloc(o);this.dataIdMap.set(e,{id:i,memoryOffset:d,shape:n,dtype:a,refCount:r}),this.wasm.tfjs.registerTensor(i,u,d),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,o),d)}async read(e){return this.readSync(e)}readSync(e,t,n){const{memoryOffset:a,dtype:r,shape:i,stringBytes:u}=this.dataIdMap.get(e);if("string"===r)return null!=t&&0!==t||!(null==n||n>=u.length)?u.slice(t,n):u;t=t||0,n=n||s.util.sizeFromShape(i);const o=s.util.bytesPerElement(r);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error(`Unknown dtype ${t}`)}}(this.wasm.HEAPU8.slice(a+t*o,a+n*o).buffer,r)}disposeData(e,t=!1){if(this.dataIdMap.has(e)){const n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){const t=this.dataIdMap.get(e);null!=t&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,n){let a;if(null==n)a=this.write(null,e,t);else{const r=this.dataIdNextNumber++;a={id:r},this.dataIdMap.set(a,{id:r,memoryOffset:n,shape:e,dtype:t,refCount:1});const i=s.util.sizeFromShape(e);this.wasm.tfjs.registerTensor(r,i,n)}return{dataId:a,shape:e,dtype:t}}typedArrayFromHeap({shape:e,dtype:t,dataId:n}){const a=this.wasm.HEAPU8.buffer,{memoryOffset:r}=this.dataIdMap.get(n),i=s.util.sizeFromShape(e);switch(t){case"float32":return new Float32Array(a,r,i);case"int32":return new Int32Array(a,r,i);case"bool":return new Uint8Array(a,r,i);default:throw new Error(`Unknown dtype ${t}`)}}}function kn(e,t,n){if(null!=vn)return vn;let a="tfjs-backend-wasm.wasm";return e&&t?a="tfjs-backend-wasm-threaded-simd.wasm":e&&(a="tfjs-backend-wasm-simd.wasm"),null!=Mn&&null!=Mn[a]?Mn[a]:n+a}const In=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"];let vn=null,Sn=null,Mn={},En=!1,xn=!1;function An(e,t=!1){if(En)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)Sn=e;else{Mn=e;const t=In.filter((e=>null==Mn[e]));if(t.length>0)throw new Error(`There were no entries found for the following binaries: ${t.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}xn=t}let Fn=-1,Nn=null;const On="3.13.0";(0,s.registerBackend)("wasm",(async()=>{const{wasm:e}=await async function(){const[e,t]=await Promise.all([(0,s.env)().getAsync("WASM_HAS_SIMD_SUPPORT"),(0,s.env)().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise(((n,a)=>{const r={};var i;r.locateFile=(n,a)=>{if(n.endsWith(".worker.js")){const e=new Blob(['var Module={};function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;this.alert=threadAlert;Module["instantiateWasm"]=function(info,receiveInstance){var instance=new WebAssembly.Instance(Module["wasmModule"],info);Module["wasmModule"]=null;receiveInstance(instance);return instance.exports};function moduleLoaded(){}this.onmessage=function(e){try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance;moduleLoaded()})}else if(e.data.cmd==="objectTransfer"){Module["PThread"].receiveObjectTransfer(e.data)}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0);var max=e.data.stackBase;var top=e.data.stackBase+e.data.stackSize;Module["establishStackSpace"](top,max);Module["_emscripten_tls_init"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].setThreadStatus(Module["_pthread_self"](),1);try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(!Module["getNoExitRuntime"]())Module["PThread"].threadExit(result)}catch(ex){if(ex==="Canceled!"){Module["PThread"].threadCancel()}else if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["getNoExitRuntime"]()){}else{Module["PThread"].threadExit(ex.status)}}else{Module["PThread"].threadExit(-2);throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["PThread"].threadCancel()}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);throw ex}};if(typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string"){self={location:{href:__filename}};var onmessage=this.onmessage;var nodeWorkerThreads=require("worker_threads");global.Worker=nodeWorkerThreads.Worker;var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var nodeFS=require("fs");var nodeRead=function(filename){return nodeFS.readFileSync(filename,"utf8")};function globalEval(x){global.require=require;global.Module=Module;eval.call(null,x)}importScripts=function(f){globalEval(nodeRead(f))};postMessage=function(msg){parentPort.postMessage(msg)};if(typeof performance==="undefined"){performance={now:function(){return Date.now()}}}}'],{type:"application/javascript"});return URL.createObjectURL(e)}return n.endsWith(".wasm")?kn(e,t,null!=Sn?Sn:a):a+n},xn&&(r.instantiateWasm=(i=kn(e,t,null!=Sn?Sn:""),(e,t)=>(s.util.fetch(i,{credentials:"same-origin"}).then((n=>{n.ok||e.env.a(`failed to load wasm binary file at '${i}'`),n.arrayBuffer().then((n=>{WebAssembly.instantiate(n,e).then((e=>{t(e.instance,e.module)}))}))})),{})));let u,o=!1;r.onAbort=()=>{o||En||(En=!0,a({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},t&&e&&null==vn?(r.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+yn().toString()],{type:"text/javascript"}),u=yn()(r)):u=_n()(r),u.then((e=>{o=!0,En=!1,e.tfjs={init:e.cwrap("init",null,[]),initWithThreadsCount:e.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:e.cwrap("get_threads_count","number",[]),registerTensor:e.cwrap("register_tensor",null,["number","number","number"]),disposeData:e.cwrap("dispose_data",null,["number"]),dispose:e.cwrap("dispose",null,[])},n({wasm:e})}))}))}();return new wn(e)}),2)},2466:(e,t,n)=>{var a,r=(a=(a="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){function t(){return R.buffer!=D&&ee(R.buffer),L}function r(){return R.buffer!=D&&ee(R.buffer),W}function s(){return R.buffer!=D&&ee(R.buffer),B}function i(){return R.buffer!=D&&ee(R.buffer),H}function u(){return R.buffer!=D&&ee(R.buffer),U}var o,d,c,l=void 0!==(e=e||{})?e:{};l.ready=new Promise((function(e,t){o=e,d=t})),"undefined"!=typeof process&&process.listeners&&(c={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var p,f={};for(p in l)l.hasOwnProperty(p)&&(f[p]=l[p]);var m=[],h=function(e,t){throw t},b=!1,y=!1,g=!1,_=!1;b="object"==typeof window,y="function"==typeof importScripts,g="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,_=!b&&!g&&!y;var w=l.ENVIRONMENT_IS_PTHREAD||!1;w&&(D=l.buffer);var k,I,v,S,M,E="";function x(e){return l.locateFile?l.locateFile(e,E):E+e}if(g){var A;E=y?n(779).dirname(E)+"/":"//",k=function(e,t){return S||(S=n(2226)),M||(M=n(779)),e=M.normalize(e),S.readFileSync(e,t?null:"utf8")},v=function(e){var t=k(e,!0);return t.buffer||(t=new Uint8Array(t)),j(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),m=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof bn))throw e})),process.on("unhandledRejection",_e),h=function(e){process.exit(e)},l.inspect=function(){return"[Emscripten Module object]"};try{A=n(7311)}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}n.g.Worker=A.Worker}else _?("undefined"!=typeof read&&(k=function(e){return read(e)}),v=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(j("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?m=scriptArgs:void 0!==arguments&&(m=arguments),"function"==typeof quit&&(h=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(b||y)&&(y?E=self.location.href:"undefined"!=typeof document&&document.currentScript&&(E=document.currentScript.src),void 0!==a&&a&&(E=a),E=0!==E.indexOf("blob:")?E.substr(0,E.lastIndexOf("/")+1):"",g?(k=function(e,t){return S||(S=n(2226)),M||(M=n(779)),e=M.normalize(e),S.readFileSync(e,t?null:"utf8")},v=function(e){var t=k(e,!0);return t.buffer||(t=new Uint8Array(t)),j(t.buffer),t}):(k=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},y&&(v=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),I=function(e,t,n){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){200==a.status||0==a.status&&a.response?t(a.response):n()},a.onerror=n,a.send(null)}));g&&"undefined"==typeof performance&&(n.g.performance=n(3848).performance);var F,N=l.print||console.log.bind(console),O=l.printErr||console.warn.bind(console);for(p in f)f.hasOwnProperty(p)&&(l[p]=f[p]);function T(e){T.shown||(T.shown={}),T.shown[e]||(T.shown[e]=1,O(e))}f=null,l.arguments&&(m=l.arguments),l.thisProgram&&l.thisProgram,l.quit&&(h=l.quit),Atomics.load,Atomics.store,Atomics.compareExchange,l.wasmBinary&&(F=l.wasmBinary);var R,P,C=l.noExitRuntime||!0;"object"!=typeof WebAssembly&&_e("no native wasm support detected");var D,L,W,B,H,U,z=!1;function j(e,t){e||_e("Assertion failed: "+t)}function V(e){var t=l["_"+e];return j(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function G(e,t,n,a,r){var s={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);Q(e,t=ln(n),n)}return t},array:function(e){var t=ln(e.length);return Z(e,t),t}},i=V(e),u=[],o=0;if(a)for(var d=0;d<a.length;d++){var c=s[n[d]];c?(0===o&&(o=dn()),u[d]=c(a[d])):u[d]=a[d]}var l=i.apply(null,u);return l=function(e){return"string"===t?K(e):"boolean"===t?Boolean(e):e}(l),0!==o&&cn(o),l}function q(e,t,n,a){var r=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&r&&!a?V(e):function(){return G(e,t,n,arguments)}}function $(e,t,n){for(var a=t+n,r="";!(t>=a);){var s=e[t++];if(!s)return r;if(128&s){var i=63&e[t++];if(192!=(224&s)){var u=63&e[t++];if((s=224==(240&s)?(15&s)<<12|i<<6|u:(7&s)<<18|i<<12|u<<6|63&e[t++])<65536)r+=String.fromCharCode(s);else{var o=s-65536;r+=String.fromCharCode(55296|o>>10,56320|1023&o)}}else r+=String.fromCharCode((31&s)<<6|i)}else r+=String.fromCharCode(s)}return r}function K(e,t){return e?$(r(),e,t):""}function X(e,t,n,a){if(!(a>0))return 0;for(var r=n,s=n+a-1,i=0;i<e.length;++i){var u=e.charCodeAt(i);if(u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&e.charCodeAt(++i)),u<=127){if(n>=s)break;t[n++]=u}else if(u<=2047){if(n+1>=s)break;t[n++]=192|u>>6,t[n++]=128|63&u}else if(u<=65535){if(n+2>=s)break;t[n++]=224|u>>12,t[n++]=128|u>>6&63,t[n++]=128|63&u}else{if(n+3>=s)break;t[n++]=240|u>>18,t[n++]=128|u>>12&63,t[n++]=128|u>>6&63,t[n++]=128|63&u}}return t[n]=0,n-r}function Q(e,t,n){return X(e,r(),t,n)}function Y(e){for(var t=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++n)),a<=127?++t:t+=a<=2047?2:a<=65535?3:4}return t}function Z(e,n){t().set(e,n)}function J(e,t){return e%t>0&&(e+=t-e%t),e}function ee(e){D=e,l.HEAP8=L=new Int8Array(e),l.HEAP16=new Int16Array(e),l.HEAP32=B=new Int32Array(e),l.HEAPU8=W=new Uint8Array(e),l.HEAPU16=new Uint16Array(e),l.HEAPU32=H=new Uint32Array(e),l.HEAPF32=new Float32Array(e),l.HEAPF64=U=new Float64Array(e)}var te,ne=l.INITIAL_MEMORY||16777216;if(w)R=l.wasmMemory,D=l.buffer;else if(l.wasmMemory)R=l.wasmMemory;else if(!((R=new WebAssembly.Memory({initial:ne/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw O("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),g&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");R&&(D=R.buffer),ne=D.byteLength,ee(D);var ae=[],re=[],se=[],ie=[],ue=[];function oe(){if(!w){if(l.preRun)for("function"==typeof l.preRun&&(l.preRun=[l.preRun]);l.preRun.length;)pe(l.preRun.shift());Oe(ae)}}function de(){w||Oe(re)}function ce(){w||Oe(se)}function le(){if(!w){if(l.postRun)for("function"==typeof l.postRun&&(l.postRun=[l.postRun]);l.postRun.length;)fe(l.postRun.shift());Oe(ue)}}function pe(e){ae.unshift(e)}function fe(e){ue.unshift(e)}w||re.push({func:function(){$t()}});var me=0,he=null,be=null;function ye(e){j(!w,"addRunDependency cannot be used in a pthread worker"),me++,l.monitorRunDependencies&&l.monitorRunDependencies(me)}function ge(e){if(me--,l.monitorRunDependencies&&l.monitorRunDependencies(me),0==me&&(null!==he&&(clearInterval(he),he=null),be)){var t=be;be=null,t()}}function _e(e){l.onAbort&&l.onAbort(e),w&&console.error("Pthread aborting at "+(new Error).stack),O(e+=""),z=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw d(t),t}function we(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}l.preloadedImages={},l.preloadedAudios={};var ke="data:application/octet-stream;base64,";function Ie(e){return we(e,ke)}var ve="file://";function Se(e){return we(e,ve)}var Me="tfjs-backend-wasm-threaded-simd.wasm";function Ee(e){try{if(e==Me&&F)return new Uint8Array(F);if(v)return v(e);throw"both async and sync fetching of the wasm failed"}catch(e){_e(e)}}function xe(){if(!F&&(b||y)){if("function"==typeof fetch&&!Se(Me))return fetch(Me,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Me+"'";return e.arrayBuffer()})).catch((function(){return Ee(Me)}));if(I)return new Promise((function(e,t){I(Me,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return Ee(Me)}))}function Ae(){var e={a:qt};function t(e,t){var n=e.exports;if(l.asm=n,te=l.asm.I,P=t,!w){var a=We.unusedWorkers.length;We.unusedWorkers.forEach((function(e){We.loadWasmModuleToWorker(e,(function(){--a||ge()}))}))}}function n(e){t(e.instance,e.module)}function a(t){return xe().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){O("failed to asynchronously prepare wasm: "+e),_e(e)}))}if(w||ye(),l.instantiateWasm)try{return l.instantiateWasm(e,t)}catch(e){return O("Module.instantiateWasm callback failed with error: "+e),!1}return(F||"function"!=typeof WebAssembly.instantiateStreaming||Ie(Me)||Se(Me)||"function"!=typeof fetch?a(n):fetch(Me,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return O("wasm streaming compile failed: "+e),O("falling back to ArrayBuffer instantiation"),a(n)}))}))).catch(d),{}}Ie(Me)||(Me=x(Me));var Fe={10664:function(){throw"Canceled!"},10682:function(e,t){setTimeout((function(){an(e,t)}),0)}};function Ne(){We.initRuntime()}function Oe(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?te.get(n)():te.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(l)}}var Te={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};function Re(e,n){if(e<=0||e>t().length||!0&e||n<0)return-28;if(0==n)return 0;n>=2147483647&&(n=1/0);var a=Atomics.load(s(),hn>>2),r=0;if(a==e&&Atomics.compareExchange(s(),hn>>2,a,0)==a&&(r=1,--n<=0))return 1;var i=Atomics.notify(s(),e>>2,n);if(i>=0)return i+r;throw"Atomics.notify returned an unexpected value "+i}function Pe(e){if(w)throw"Internal Error! killThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in killThread!";s()[e+12>>2]=0;var t=We.pthreads[e];t.worker.terminate(),We.freeThreadData(t),We.runningWorkers.splice(We.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}function Ce(e){if(w)throw"Internal Error! cancelThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cancelThread!";We.pthreads[e].worker.postMessage({cmd:"cancel"})}function De(e){if(w)throw"Internal Error! cleanupThread() can only ever be called from main application thread!";if(!e)throw"Internal Error! Null pthread_ptr in cleanupThread!";var t=We.pthreads[e];if(t){s()[e+12>>2]=0;var n=t.worker;We.returnWorkerToPool(n)}}l._emscripten_futex_wake=Re;var Le,We={unusedWorkers:[],runningWorkers:[],initMainThreadBlock:function(){for(var e=0;e<8;++e)We.allocateUnusedWorker()},initRuntime:function(){for(var e=Kt(228),t=0;t<57;++t)i()[e/4+t]=0;s()[e+12>>2]=e;var n=e+152;s()[n>>2]=n;var a=Kt(512);for(t=0;t<128;++t)i()[a/4+t]=0;Atomics.store(i(),e+100>>2,a),Atomics.store(i(),e+40>>2,e),on(e,!y,1),tn(e)},initWorker:function(){},pthreads:{},threadExitHandlers:[],setThreadStatus:function(){},runExitHandlers:function(){for(;We.threadExitHandlers.length>0;)We.threadExitHandlers.pop()();w&&Zt()&&Jt()},runExitHandlersAndDeinitThread:function(e,t){Atomics.store(i(),e+56>>2,1),Atomics.store(i(),e+60>>2,0),We.runExitHandlers(),Atomics.store(i(),e+4>>2,t),Atomics.store(i(),e+0>>2,1),Re(e+0,2147483647),on(0,0,0)},threadExit:function(e){var t=Zt();t&&(We.runExitHandlersAndDeinitThread(t,e),w&&postMessage({cmd:"exit"}))},threadCancel:function(){We.runExitHandlersAndDeinitThread(Zt(),-1),postMessage({cmd:"cancelDone"})},terminateAllThreads:function(){for(var e in We.pthreads)(a=We.pthreads[e])&&a.worker&&We.returnWorkerToPool(a.worker);We.pthreads={};for(var t=0;t<We.unusedWorkers.length;++t)(n=We.unusedWorkers[t]).terminate();for(We.unusedWorkers=[],t=0;t<We.runningWorkers.length;++t){var n,a=(n=We.runningWorkers[t]).pthread;We.freeThreadData(a),n.terminate()}We.runningWorkers=[]},freeThreadData:function(e){if(e){if(e.threadInfoStruct){var t=s()[e.threadInfoStruct+100>>2];s()[e.threadInfoStruct+100>>2]=0,Xt(t),Xt(e.threadInfoStruct)}e.threadInfoStruct=0,e.allocatedOwnStack&&e.stackBase&&Xt(e.stackBase),e.stackBase=0,e.worker&&(e.worker.pthread=null)}},returnWorkerToPool:function(e){We.runWithoutMainThreadQueuedCalls((function(){delete We.pthreads[e.pthread.threadInfoStruct],We.unusedWorkers.push(e),We.runningWorkers.splice(We.runningWorkers.indexOf(e),1),We.freeThreadData(e.pthread),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){s()[mn>>2]=0;try{e()}finally{s()[mn>>2]=1}},receiveObjectTransfer:function(e){},loadWasmModuleToWorker:function(e,t){e.onmessage=function(n){var a=n.data,r=a.cmd;if(e.pthread&&(We.currentProxiedOperationCallerThread=e.pthread.threadInfoStruct),a.targetThread&&a.targetThread!=Zt()){var s=We.pthreads[a.targetThread];return s?s.worker.postMessage(n.data,a.transferList):console.error('Internal error! Worker sent a message "'+r+'" to target pthread '+a.targetThread+", but that thread no longer exists!"),void(We.currentProxiedOperationCallerThread=void 0)}if("processQueuedMainThreadWork"===r)en();else if("spawnThread"===r)Ct(n.data);else if("cleanupThread"===r)De(a.thread);else if("killThread"===r)Pe(a.thread);else if("cancelThread"===r)Ce(a.thread);else if("loaded"===r)e.loaded=!0,t&&t(e),e.runPthread&&(e.runPthread(),delete e.runPthread);else if("print"===r)N("Thread "+a.threadId+": "+a.text);else if("printErr"===r)O("Thread "+a.threadId+": "+a.text);else if("alert"===r)alert("Thread "+a.threadId+": "+a.text);else if("exit"===r)e.pthread&&Atomics.load(i(),e.pthread.threadInfoStruct+64>>2)&&We.returnWorkerToPool(e);else if("exitProcess"===r)try{gn(a.returnCode)}catch(n){if(n instanceof bn)return;throw n}else"cancelDone"===r?We.returnWorkerToPool(e):"objectTransfer"===r?We.receiveObjectTransfer(n.data):"setimmediate"===n.data.target?e.postMessage(n.data):O("worker sent an unknown command "+r);We.currentProxiedOperationCallerThread=void 0},e.onerror=function(e){O("pthread sent an error! "+e.filename+":"+e.lineno+": "+e.message)},g&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("exit",(function(e){}))),e.postMessage({cmd:"load",urlOrBlob:l.mainScriptUrlOrBlob||a,wasmMemory:R,wasmModule:P})},allocateUnusedWorker:function(){var e=x("tfjs-backend-wasm-threaded-simd.worker.js");We.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==We.unusedWorkers.length&&(We.allocateUnusedWorker(),We.loadWasmModuleToWorker(We.unusedWorkers[0])),We.unusedWorkers.length>0?We.unusedWorkers.pop():null},busySpinWait:function(e){for(var t=performance.now()+e;performance.now()<t;);}};function Be(e,t){pn(e,t),cn(e)}function He(){return C}function Ue(e,t){return te.get(e)(t)}function ze(e,t,n,a){_e("Assertion failed: "+K(e)+", at: "+[t?K(t):"unknown filename",n,a?K(a):"unknown function"])}function je(e,t){_main(e,t)}function Ve(e){return s()[Qt()>>2]=e,e}function Ge(e,t){if(w)return Je(1,1,e,t)}function qe(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(w)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=We.pthreads[e],a=n&&n.worker;if(!a)return;a.postMessage({cmd:"processThreadQueue"})}return 1}function $e(){_e()}function Ke(e,t,n){var a=nt(t,n);return Fe[e].apply(null,a)}function Xe(e,t){}function Qe(e,n,a){if(e<=0||e>t().length||!0&e)return-28;if(b){if(Atomics.load(s(),e>>2)!=n)return-6;var r=performance.now(),i=r+a;for(Atomics.exchange(s(),hn>>2,e);;){if((r=performance.now())>i)return Atomics.exchange(s(),hn>>2,0),-73;if(0==Atomics.exchange(s(),hn>>2,0))break;if(en(),Atomics.load(s(),e>>2)!=n)return-6;Atomics.exchange(s(),hn>>2,e)}return 0}var u=Atomics.wait(s(),e>>2,n,a);if("timed-out"===u)return-73;if("not-equal"===u)return-6;if("ok"===u)return 0;throw"Atomics.wait returned an unexpected value "+u}function Ye(e,t,n){r().copyWithin(e,t,t+n)}function Ze(){return g?n(6893).cpus().length:navigator.hardwareConcurrency}function Je(e,t){for(var n=arguments.length-2,a=dn(),r=n,s=ln(8*r),i=s>>3,o=0;o<n;o++){var d=arguments[2+o];u()[i+o]=d}var c=sn(e,r,s,t);return cn(a),c}l.establishStackSpace=Be,l.getNoExitRuntime=He,l.invokeEntryPoint=Ue,Le=g?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:w?function(){return performance.now()-l.__performance_now_clock_drift}:"undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var et=[],tt=[];function nt(e,t){var n;for(tt.length=0,t>>=2;n=r()[e++];){var a=n<105;a&&1&t&&t++,tt.push(a?u()[t++>>1]:s()[t]),++t}return tt}function at(e,t,n){et.length=t;for(var a=n>>3,r=0;r<t;r++)et[r]=u()[a+r];return(e<0?Fe[-e-1]:Gt[e]).apply(null,et)}function rt(){return r().length}function st(e){try{return R.grow(e-D.byteLength+65535>>>16),ee(R.buffer),1}catch(e){}}function it(e){var t=rt();if(e<=t)return!1;var n=2147483648;if(e>n)return!1;for(var a=1;a<=4;a*=2){var r=t*(1+.2/a);if(r=Math.min(r,e+100663296),st(Math.min(n,J(Math.max(e,r),65536))))return!0}return!1}var ut={inEventHandler:0,removeAllEventListeners:function(){for(var e=ut.eventHandlers.length-1;e>=0;--e)ut._removeHandler(e);ut.eventHandlers=[],ut.deferredCalls=[]},registerRemoveEventListeners:function(){ut.removeEventListenersRegistered||(ie.push(ut.removeAllEventListeners),ut.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function a(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var r in ut.deferredCalls){var s=ut.deferredCalls[r];if(s.targetFunction==e&&a(s.argsList,n))return}ut.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),ut.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<ut.deferredCalls.length;++t)ut.deferredCalls[t].targetFunction==e&&(ut.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return ut.inEventHandler&&ut.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(ut.canPerformEventHandlerRequests())for(var e=0;e<ut.deferredCalls.length;++e){var t=ut.deferredCalls[e];ut.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<ut.eventHandlers.length;++n)ut.eventHandlers[n].target!=e||t&&t!=ut.eventHandlers[n].eventTypeString||ut._removeHandler(n--)},_removeHandler:function(e){var t=ut.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),ut.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++ut.inEventHandler,ut.currentEventHandler=e,ut.runDeferredCalls(),e.handlerFunc(t),ut.runDeferredCalls(),--ut.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),ut.eventHandlers.push(e),ut.registerRemoveEventListeners();else for(var n=0;n<ut.eventHandlers.length;++n)ut.eventHandlers[n].target==e.target&&ut.eventHandlers[n].eventTypeString==e.eventTypeString&&ut._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,a,r){var i=dn(),u=ln(12);s()[u>>2]=n,s()[u+4>>2]=a,s()[u+8>>2]=r,un(0,e,637534208,t,a,u),cn(i)},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return We.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function ot(e){var t=Y(e)+1,n=Kt(t);return Q(e,n,t),n}function dt(e,t,n,a){var r=dn(),i=ln(12),u=0;t&&(u=ot(t)),s()[i>>2]=u,s()[i+4>>2]=n,s()[i+8>>2]=a,un(0,e,657457152,0,u,i),cn(r)}function ct(e,t,n,a){dt(e,t=t?K(t):"",n,a)}function lt(e){return e>2?K(e):e}var pt=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function ft(e){return e=lt(e),pt[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function mt(e){return ft(e)}function ht(e,t,n){var a=mt(e);if(!a)return-4;if(a.canvasSharedPtr&&(s()[a.canvasSharedPtr>>2]=t,s()[a.canvasSharedPtr+4>>2]=n),!a.offscreenCanvas&&a.controlTransferredOffscreen)return a.canvasSharedPtr?(ct(s()[a.canvasSharedPtr+8>>2],e,t,n),1):-4;a.offscreenCanvas&&(a=a.offscreenCanvas);var r=!1;if(a.GLctxObject&&a.GLctxObject.GLctx){var i=a.GLctxObject.GLctx.getParameter(2978);r=0===i[0]&&0===i[1]&&i[2]===a.width&&i[3]===a.height}return a.width=t,a.height=n,r&&a.GLctxObject.GLctx.viewport(0,0,t,n),0}function bt(e,t,n){return w?Je(2,1,e,t,n):ht(e,t,n)}function yt(e,t,n){return mt(e)?ht(e,t,n):bt(e,t,n)}function gt(e){}function _t(e,t){}function wt(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)return e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,a,r){t.drawArraysInstancedANGLE(e,n,a,r)},e.drawElementsInstanced=function(e,n,a,r,s){t.drawElementsInstancedANGLE(e,n,a,r,s)},1}function kt(e){var t=e.getExtension("OES_vertex_array_object");if(t)return e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)},1}function It(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)return e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)},1}function vt(e){return!!(e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw"))}var St={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},timerQueriesEXT:[],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){St.lastError||(St.lastError=e)},getNewId:function(e){for(var t=St.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,a){for(var r="",i=0;i<t;++i){var u=a?s()[a+4*i>>2]:-1;r+=K(s()[n+4*i>>2],u<0?void 0:u)}return r},createContext:function(e,t){var n=e.getContext("webgl",t);return n?St.registerContext(n,t):0},registerContext:function(e,t){var n=Kt(8);s()[n+4>>2]=Zt();var a={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=a),St.contexts[n]=a,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&St.initExtensions(a),n},makeContextCurrent:function(e){return St.currentContext=St.contexts[e],l.ctx=At=St.currentContext&&St.currentContext.GLctx,!(e&&!At)},getContext:function(e){return St.contexts[e]},deleteContext:function(e){St.currentContext===St.contexts[e]&&(St.currentContext=null),"object"==typeof ut&&ut.removeAllHandlersOnTarget(St.contexts[e].GLctx.canvas),St.contexts[e]&&St.contexts[e].GLctx.canvas&&(St.contexts[e].GLctx.canvas.GLctxObject=void 0),Xt(St.contexts[e].handle),St.contexts[e]=null},initExtensions:function(e){if(e||(e=St.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;wt(t),kt(t),It(t),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query"),vt(t),(t.getSupportedExtensions()||[]).forEach((function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&t.getExtension(e)}))}},populateUniformTable:function(e){for(var t=St.programs[e],n=St.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},a=n.uniforms,r=At.getProgramParameter(t,35718),s=0;s<r;++s){var i=At.getActiveUniform(t,s),u=i.name;n.maxUniformLength=Math.max(n.maxUniformLength,u.length+1),"]"==u.slice(-1)&&(u=u.slice(0,u.lastIndexOf("[")));var o=At.getUniformLocation(t,u);if(o){var d=St.getNewId(St.uniforms);a[u]=[i.size,d],St.uniforms[d]=o;for(var c=1;c<i.size;++c){var l=u+"["+c+"]";o=At.getUniformLocation(t,l),d=St.getNewId(St.uniforms),St.uniforms[d]=o}}}}},Mt=["default","low-power","high-performance"];function Et(e,t){var n=t>>2,a=s()[n+6],r={alpha:!!s()[n+0],depth:!!s()[n+1],stencil:!!s()[n+2],antialias:!!s()[n+3],premultipliedAlpha:!!s()[n+4],preserveDrawingBuffer:!!s()[n+5],powerPreference:Mt[a],failIfMajorPerformanceCaveat:!!s()[n+7],majorVersion:s()[n+8],minorVersion:s()[n+9],enableExtensionsByDefault:s()[n+10],explicitSwapControl:s()[n+11],proxyContextToMainThread:s()[n+12],renderViaOffscreenBackBuffer:s()[n+13]},i=mt(e);return i?r.explicitSwapControl?0:St.createContext(i,r):0}function xt(e,t){return Et(e,t)}var At,Ft={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Ft.buffers[e];0===t||10===t?((1===e?N:O)($(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return Ft.varargs+=4,s()[Ft.varargs-4>>2]},getStr:function(e){return K(e)},get64:function(e,t){return e}};function Nt(e){return w?Je(3,1,e):0}function Ot(e,t,n,a,r){if(w)return Je(4,1,e,t,n,a,r)}function Tt(e,t,n,a){if(w)return Je(5,1,e,t,n,a);for(var i=0,u=0;u<n;u++){for(var o=s()[t+8*u>>2],d=s()[t+(8*u+4)>>2],c=0;c<d;c++)Ft.printChar(e,r()[o+c]);i+=d}return s()[a>>2]=i,0}function Rt(e){var t=We.threadExitHandlers.pop();e&&t()}function Pt(e,t){We.threadExitHandlers.push((function(){te.get(e)(t)}))}function Ct(e){if(w)throw"Internal Error! spawnThread() can only ever be called from main application thread!";var t=We.getNewWorker();if(void 0!==t.pthread)throw"Internal error!";if(!e.pthread_ptr)throw"Internal error, no pthread ptr!";We.runningWorkers.push(t);for(var n=Kt(512),a=0;a<128;++a)s()[n+4*a>>2]=0;var r=e.stackBase+e.stackSize,u=We.pthreads[e.pthread_ptr]={worker:t,stackBase:e.stackBase,stackSize:e.stackSize,allocatedOwnStack:e.allocatedOwnStack,threadInfoStruct:e.pthread_ptr},o=u.threadInfoStruct>>2;Atomics.store(i(),o+16,e.detached),Atomics.store(i(),o+25,n),Atomics.store(i(),o+10,u.threadInfoStruct),Atomics.store(i(),o+20,e.stackSize),Atomics.store(i(),o+19,r),Atomics.store(i(),o+26,e.stackSize),Atomics.store(i(),o+28,r),Atomics.store(i(),o+29,e.detached);var d=Yt()+40;Atomics.store(i(),o+43,d),t.pthread=u;var c={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr,stackBase:e.stackBase,stackSize:e.stackSize};t.runPthread=function(){c.time=performance.now(),t.postMessage(c,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread)}function Dt(e,t,n,a){if("undefined"==typeof SharedArrayBuffer)return O("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;if(!e)return O("pthread_create called with a null thread pointer!"),28;var r=[];if(w&&0===r.length)return rn(687865856,e,t,n,a);var u=0,o=0,d=0;t&&-1!=t?(u=s()[t>>2],u+=81920,o=s()[t+8>>2],d=0!==s()[t+12>>2]):u=2097152;var c=0==o;c?o=fn(16,u):j((o-=u)>0);for(var l=Kt(228),p=0;p<57;++p)i()[(l>>2)+p]=0;s()[e>>2]=l,s()[l+12>>2]=l;var f=l+152;s()[f>>2]=f;var m={stackBase:o,stackSize:u,allocatedOwnStack:c,detached:d,startRoutine:n,pthread_ptr:l,arg:a,transferList:r};return w?(m.cmd="spawnThread",postMessage(m,r)):Ct(m),0}function Lt(){if(w){var e=Zt();if(e&&!Atomics.load(i(),e+56>>2)&&2==Atomics.load(i(),e+0>>2))throw"Canceled!"}}function Wt(){g||y||T("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function Bt(e,t,n){if(!e)return O("pthread_join attempted on a null thread pointer!"),Te.ESRCH;if(w&&Zt()==e)return O("PThread "+e+" is attempting to join to itself!"),Te.EDEADLK;if(!w&&nn()==e)return O("Main thread "+e+" is attempting to join to itself!"),Te.EDEADLK;if(s()[e+12>>2]!==e)return O("pthread_join attempted on thread "+e+", which does not point to a valid thread, or does not exist anymore!"),Te.ESRCH;if(Atomics.load(i(),e+64>>2))return O("Attempted to join thread "+e+", which was already detached!"),Te.EINVAL;for(n&&Wt();;){var a=Atomics.load(i(),e+0>>2);if(1==a){var r=Atomics.load(i(),e+4>>2);return t&&(s()[t>>2]=r),Atomics.store(i(),e+64>>2,1),w?postMessage({cmd:"cleanupThread",thread:e}):De(e),0}if(!n)return Te.EBUSY;Lt(),w||en(),Qe(e+0,a,w?100:1)}}function Ht(e,t){return Bt(e,t,!0)}function Ut(e){if(w)return Je(6,1,e);switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Ve(28),-1}w||We.initMainThreadBlock();var zt,jt,Vt,Gt=[null,Ge,bt,Nt,Ot,Tt,Ut],qt={e:ze,r:je,x:qe,b:$e,y:Ke,j:Xe,d:Qe,c:Re,f:Le,p:Ye,A:Ze,u:at,q:it,v:yt,i:gt,s:_t,w:xt,l:Nt,n:Ot,g:Tt,o:Ne,a:R||l.wasmMemory,z:Rt,k:Pt,h:Dt,m:Ht,t:Ut},$t=(Ae(),l.___wasm_call_ctors=function(){return($t=l.___wasm_call_ctors=l.asm.B).apply(null,arguments)}),Kt=(l._init=function(){return(l._init=l.asm.C).apply(null,arguments)},l._init_with_threads_count=function(){return(l._init_with_threads_count=l.asm.D).apply(null,arguments)},l._get_threads_count=function(){return(l._get_threads_count=l.asm.E).apply(null,arguments)},l._register_tensor=function(){return(l._register_tensor=l.asm.F).apply(null,arguments)},l._dispose_data=function(){return(l._dispose_data=l.asm.G).apply(null,arguments)},l._dispose=function(){return(l._dispose=l.asm.H).apply(null,arguments)},l._Abs=function(){return(l._Abs=l.asm.J).apply(null,arguments)},l._Add=function(){return(l._Add=l.asm.K).apply(null,arguments)},l._AddN=function(){return(l._AddN=l.asm.L).apply(null,arguments)},l._All=function(){return(l._All=l.asm.M).apply(null,arguments)},l._Any=function(){return(l._Any=l.asm.N).apply(null,arguments)},l._ArgMax=function(){return(l._ArgMax=l.asm.O).apply(null,arguments)},l._AvgPool=function(){return(l._AvgPool=l.asm.P).apply(null,arguments)},l._BatchMatMul=function(){return(l._BatchMatMul=l.asm.Q).apply(null,arguments)},l._Ceil=function(){return(l._Ceil=l.asm.R).apply(null,arguments)},l._ClipByValue=function(){return(l._ClipByValue=l.asm.S).apply(null,arguments)},l._Conv2D=function(){return(l._Conv2D=l.asm.T).apply(null,arguments)},l._Conv2DBackpropInput=function(){return(l._Conv2DBackpropInput=l.asm.U).apply(null,arguments)},l._Cos=function(){return(l._Cos=l.asm.V).apply(null,arguments)},l._Cosh=function(){return(l._Cosh=l.asm.W).apply(null,arguments)},l._CropAndResize=function(){return(l._CropAndResize=l.asm.X).apply(null,arguments)},l._Cumsum=function(){return(l._Cumsum=l.asm.Y).apply(null,arguments)},l._DepthToSpace=function(){return(l._DepthToSpace=l.asm.Z).apply(null,arguments)},l._DepthwiseConv2dNative=function(){return(l._DepthwiseConv2dNative=l.asm._).apply(null,arguments)},l._Elu=function(){return(l._Elu=l.asm.$).apply(null,arguments)},l._Equal=function(){return(l._Equal=l.asm.aa).apply(null,arguments)},l._Exp=function(){return(l._Exp=l.asm.ba).apply(null,arguments)},l._FlipLeftRight=function(){return(l._FlipLeftRight=l.asm.ca).apply(null,arguments)},l._Floor=function(){return(l._Floor=l.asm.da).apply(null,arguments)},l._FloorDiv=function(){return(l._FloorDiv=l.asm.ea).apply(null,arguments)},l._FusedBatchNorm=function(){return(l._FusedBatchNorm=l.asm.fa).apply(null,arguments)},l._FusedConv2D=function(){return(l._FusedConv2D=l.asm.ga).apply(null,arguments)},l._FusedDepthwiseConv2D=function(){return(l._FusedDepthwiseConv2D=l.asm.ha).apply(null,arguments)},l._Gather=function(){return(l._Gather=l.asm.ia).apply(null,arguments)},l._GatherNd=function(){return(l._GatherNd=l.asm.ja).apply(null,arguments)},l._Greater=function(){return(l._Greater=l.asm.ka).apply(null,arguments)},l._GreaterEqual=function(){return(l._GreaterEqual=l.asm.la).apply(null,arguments)},l._LeakyRelu=function(){return(l._LeakyRelu=l.asm.ma).apply(null,arguments)},l._Less=function(){return(l._Less=l.asm.na).apply(null,arguments)},l._LessEqual=function(){return(l._LessEqual=l.asm.oa).apply(null,arguments)},l._Log=function(){return(l._Log=l.asm.pa).apply(null,arguments)},l._LogicalAnd=function(){return(l._LogicalAnd=l.asm.qa).apply(null,arguments)},l._Max=function(){return(l._Max=l.asm.ra).apply(null,arguments)},l._MaxPool=function(){return(l._MaxPool=l.asm.sa).apply(null,arguments)},l._Maximum=function(){return(l._Maximum=l.asm.ta).apply(null,arguments)},l._Mean=function(){return(l._Mean=l.asm.ua).apply(null,arguments)},l._Min=function(){return(l._Min=l.asm.va).apply(null,arguments)},l._Minimum=function(){return(l._Minimum=l.asm.wa).apply(null,arguments)},l._MirrorPad=function(){return(l._MirrorPad=l.asm.xa).apply(null,arguments)},l._Multiply=function(){return(l._Multiply=l.asm.ya).apply(null,arguments)},l._Neg=function(){return(l._Neg=l.asm.za).apply(null,arguments)},l._NonMaxSuppressionV3=function(){return(l._NonMaxSuppressionV3=l.asm.Aa).apply(null,arguments)},l._NonMaxSuppressionV4=function(){return(l._NonMaxSuppressionV4=l.asm.Ba).apply(null,arguments)},l._NonMaxSuppressionV5=function(){return(l._NonMaxSuppressionV5=l.asm.Ca).apply(null,arguments)},l._NotEqual=function(){return(l._NotEqual=l.asm.Da).apply(null,arguments)},l._OneHot=function(){return(l._OneHot=l.asm.Ea).apply(null,arguments)},l._PadV2=function(){return(l._PadV2=l.asm.Fa).apply(null,arguments)},l._Pow=function(){return(l._Pow=l.asm.Ga).apply(null,arguments)},l._Prelu=function(){return(l._Prelu=l.asm.Ha).apply(null,arguments)},l._Prod=function(){return(l._Prod=l.asm.Ia).apply(null,arguments)},l._RealDiv=function(){return(l._RealDiv=l.asm.Ja).apply(null,arguments)},l._Relu=function(){return(l._Relu=l.asm.Ka).apply(null,arguments)},l._Relu6=function(){return(l._Relu6=l.asm.La).apply(null,arguments)},l._ResizeBilinear=function(){return(l._ResizeBilinear=l.asm.Ma).apply(null,arguments)},l._Reverse=function(){return(l._Reverse=l.asm.Na).apply(null,arguments)},l._RotateWithOffset=function(){return(l._RotateWithOffset=l.asm.Oa).apply(null,arguments)},l._Round=function(){return(l._Round=l.asm.Pa).apply(null,arguments)},l._Rsqrt=function(){return(l._Rsqrt=l.asm.Qa).apply(null,arguments)},l._ScatterNd=function(){return(l._ScatterNd=l.asm.Ra).apply(null,arguments)},l._SelectV2=function(){return(l._SelectV2=l.asm.Sa).apply(null,arguments)},l._Sigmoid=function(){return(l._Sigmoid=l.asm.Ta).apply(null,arguments)},l._Sin=function(){return(l._Sin=l.asm.Ua).apply(null,arguments)},l._Softmax=function(){return(l._Softmax=l.asm.Va).apply(null,arguments)},l._SparseFillEmptyRows=function(){return(l._SparseFillEmptyRows=l.asm.Wa).apply(null,arguments)},l._SparseReshape=function(){return(l._SparseReshape=l.asm.Xa).apply(null,arguments)},l._SparseSegmentReduction=function(){return(l._SparseSegmentReduction=l.asm.Ya).apply(null,arguments)},l._Sqrt=function(){return(l._Sqrt=l.asm.Za).apply(null,arguments)},l._Square=function(){return(l._Square=l.asm._a).apply(null,arguments)},l._SquaredDifference=function(){return(l._SquaredDifference=l.asm.$a).apply(null,arguments)},l._Step=function(){return(l._Step=l.asm.ab).apply(null,arguments)},l._StridedSlice=function(){return(l._StridedSlice=l.asm.bb).apply(null,arguments)},l._Sub=function(){return(l._Sub=l.asm.cb).apply(null,arguments)},l._Sum=function(){return(l._Sum=l.asm.db).apply(null,arguments)},l._Tan=function(){return(l._Tan=l.asm.eb).apply(null,arguments)},l._Tanh=function(){return(l._Tanh=l.asm.fb).apply(null,arguments)},l._Tile=function(){return(l._Tile=l.asm.gb).apply(null,arguments)},l._TopK=function(){return(l._TopK=l.asm.hb).apply(null,arguments)},l._Transform=function(){return(l._Transform=l.asm.ib).apply(null,arguments)},l._Transpose=function(){return(l._Transpose=l.asm.jb).apply(null,arguments)},l.__FusedMatMul=function(){return(l.__FusedMatMul=l.asm.kb).apply(null,arguments)},l._malloc=function(){return(Kt=l._malloc=l.asm.lb).apply(null,arguments)}),Xt=l._free=function(){return(Xt=l._free=l.asm.mb).apply(null,arguments)},Qt=l.___errno_location=function(){return(Qt=l.___errno_location=l.asm.nb).apply(null,arguments)},Yt=l._emscripten_get_global_libc=function(){return(Yt=l._emscripten_get_global_libc=l.asm.ob).apply(null,arguments)},Zt=l._pthread_self=function(){return(Zt=l._pthread_self=l.asm.pb).apply(null,arguments)},Jt=l.___pthread_tsd_run_dtors=function(){return(Jt=l.___pthread_tsd_run_dtors=l.asm.qb).apply(null,arguments)},en=l._emscripten_main_thread_process_queued_calls=function(){return(en=l._emscripten_main_thread_process_queued_calls=l.asm.rb).apply(null,arguments)},tn=(l._emscripten_current_thread_process_queued_calls=function(){return(l._emscripten_current_thread_process_queued_calls=l.asm.sb).apply(null,arguments)},l._emscripten_register_main_browser_thread_id=function(){return(tn=l._emscripten_register_main_browser_thread_id=l.asm.tb).apply(null,arguments)}),nn=l._emscripten_main_browser_thread_id=function(){return(nn=l._emscripten_main_browser_thread_id=l.asm.ub).apply(null,arguments)},an=l.__emscripten_do_dispatch_to_thread=function(){return(an=l.__emscripten_do_dispatch_to_thread=l.asm.vb).apply(null,arguments)},rn=l._emscripten_sync_run_in_main_thread_4=function(){return(rn=l._emscripten_sync_run_in_main_thread_4=l.asm.wb).apply(null,arguments)},sn=l._emscripten_run_in_main_runtime_thread_js=function(){return(sn=l._emscripten_run_in_main_runtime_thread_js=l.asm.xb).apply(null,arguments)},un=l.__emscripten_call_on_thread=function(){return(un=l.__emscripten_call_on_thread=l.asm.yb).apply(null,arguments)},on=(l._emscripten_tls_init=function(){return(l._emscripten_tls_init=l.asm.zb).apply(null,arguments)},l.__emscripten_thread_init=function(){return(on=l.__emscripten_thread_init=l.asm.Ab).apply(null,arguments)}),dn=l.stackSave=function(){return(dn=l.stackSave=l.asm.Bb).apply(null,arguments)},cn=l.stackRestore=function(){return(cn=l.stackRestore=l.asm.Cb).apply(null,arguments)},ln=l.stackAlloc=function(){return(ln=l.stackAlloc=l.asm.Db).apply(null,arguments)},pn=l._emscripten_stack_set_limits=function(){return(pn=l._emscripten_stack_set_limits=l.asm.Eb).apply(null,arguments)},fn=l._memalign=function(){return(fn=l._memalign=l.asm.Fb).apply(null,arguments)},mn=l.__emscripten_allow_main_runtime_queued_calls=10656,hn=l.__emscripten_main_thread_futex=12292;function bn(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function yn(e){if(e=e||m,!(me>0)){if(w)return o(l),de(),void postMessage({cmd:"loaded"});oe(),me>0||(l.setStatus?(l.setStatus("Running..."),setTimeout((function(){setTimeout((function(){l.setStatus("")}),1),t()}),1)):t())}function t(){zt||(zt=!0,l.calledRun=!0,z||(de(),ce(),o(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),le()))}}function gn(e,t){if(!t||!C||0!==e){if(!t&&w)throw postMessage({cmd:"exitProcess",returnCode:e}),new bn(e);C||(We.terminateAllThreads(),l.onExit&&l.onExit(e),z=!0),h(e,new bn(e))}}if(l.cwrap=q,l.PThread=We,l.PThread=We,l.wasmMemory=R,l.ExitStatus=bn,be=function e(){zt||yn(),zt||(be=e)},l.run=yn,l.preInit)for("function"==typeof l.preInit&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();if(w&&(C=!1,We.initWorker()),yn(),c&&(jt={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!c.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!c.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof WasmBackendModule)Vt=WasmBackendModule;else{if(void 0===e)throw new Error("Could not find wasm module in post.js");Vt=e}if(jt){var _n=Vt._dispose;Vt._dispose=function(){_n(),jt.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),jt.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return e.ready});e.exports=r},1753:(e,t,n)=>{var a,r=(a=(a="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,r,s,i=void 0!==(e=e||{})?e:{};i.ready=new Promise((function(e,n){t=e,r=n})),"undefined"!=typeof process&&process.listeners&&(s={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var u,o={};for(u in i)i.hasOwnProperty(u)&&(o[u]=i[u]);var d=[],c=!1,l=!1,p=!1,f=!1;c="object"==typeof window,l="function"==typeof importScripts,p="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,f=!c&&!p&&!l;var m,h,b,y,g,_="";function w(e){return i.locateFile?i.locateFile(e,_):_+e}p?(_=l?n(779).dirname(_)+"/":"//",m=function(e,t){return y||(y=n(2226)),g||(g=n(779)),e=g.normalize(e),y.readFileSync(e,t?null:"utf8")},b=function(e){var t=m(e,!0);return t.buffer||(t=new Uint8Array(t)),E(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),d=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Le))throw e})),process.on("unhandledRejection",re),i.inspect=function(){return"[Emscripten Module object]"}):f?("undefined"!=typeof read&&(m=function(e){return read(e)}),b=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(E("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?d=scriptArgs:void 0!==arguments&&(d=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(c||l)&&(l?_=self.location.href:"undefined"!=typeof document&&document.currentScript&&(_=document.currentScript.src),a&&(_=a),_=0!==_.indexOf("blob:")?_.substr(0,_.lastIndexOf("/")+1):"",m=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},l&&(b=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),h=function(e,t,n){var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=function(){200==a.status||0==a.status&&a.response?t(a.response):n()},a.onerror=n,a.send(null)});var k,I,v=i.print||console.log.bind(console),S=i.printErr||console.warn.bind(console);for(u in o)o.hasOwnProperty(u)&&(i[u]=o[u]);o=null,i.arguments&&(d=i.arguments),i.thisProgram&&i.thisProgram,i.quit&&i.quit,i.wasmBinary&&(k=i.wasmBinary),i.noExitRuntime,"object"!=typeof WebAssembly&&re("no native wasm support detected");var M=!1;function E(e,t){e||re("Assertion failed: "+t)}function x(e){var t=i["_"+e];return E(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function A(e,t,n,a,r){var s={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);W(e,t=De(n),n)}return t},array:function(e){var t=De(e.length);return B(e,t),t}},i=x(e),u=[],o=0;if(a)for(var d=0;d<a.length;d++){var c=s[n[d]];c?(0===o&&(o=Pe()),u[d]=c(a[d])):u[d]=a[d]}var l=i.apply(null,u);return l=function(e){return"string"===t?D(e):"boolean"===t?Boolean(e):e}(l),0!==o&&Ce(o),l}function F(e,t,n,a){var r=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&r&&!a?x(e):function(){return A(e,t,n,arguments)}}var N,O,T,R,P="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function C(e,t,n){for(var a=t+n,r=t;e[r]&&!(r>=a);)++r;if(r-t>16&&e.subarray&&P)return P.decode(e.subarray(t,r));for(var s="";t<r;){var i=e[t++];if(128&i){var u=63&e[t++];if(192!=(224&i)){var o=63&e[t++];if((i=224==(240&i)?(15&i)<<12|u<<6|o:(7&i)<<18|u<<12|o<<6|63&e[t++])<65536)s+=String.fromCharCode(i);else{var d=i-65536;s+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else s+=String.fromCharCode((31&i)<<6|u)}else s+=String.fromCharCode(i)}return s}function D(e,t){return e?C(T,e,t):""}function L(e,t,n,a){if(!(a>0))return 0;for(var r=n,s=n+a-1,i=0;i<e.length;++i){var u=e.charCodeAt(i);if(u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&e.charCodeAt(++i)),u<=127){if(n>=s)break;t[n++]=u}else if(u<=2047){if(n+1>=s)break;t[n++]=192|u>>6,t[n++]=128|63&u}else if(u<=65535){if(n+2>=s)break;t[n++]=224|u>>12,t[n++]=128|u>>6&63,t[n++]=128|63&u}else{if(n+3>=s)break;t[n++]=240|u>>18,t[n++]=128|u>>12&63,t[n++]=128|u>>6&63,t[n++]=128|63&u}}return t[n]=0,n-r}function W(e,t,n){return L(e,T,t,n)}function B(e,t){O.set(e,t)}function H(e,t){return e%t>0&&(e+=t-e%t),e}function U(e){N=e,i.HEAP8=O=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=R=new Int32Array(e),i.HEAPU8=T=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e)}i.INITIAL_MEMORY;var z,j=[],V=[],G=[],q=[];function $(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)Y(i.preRun.shift());me(j)}function K(){me(V)}function X(){me(G)}function Q(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)Z(i.postRun.shift());me(q)}function Y(e){j.unshift(e)}function Z(e){q.unshift(e)}V.push({func:function(){Te()}});var J=0,ee=null,te=null;function ne(e){J++,i.monitorRunDependencies&&i.monitorRunDependencies(J)}function ae(e){if(J--,i.monitorRunDependencies&&i.monitorRunDependencies(J),0==J&&(null!==ee&&(clearInterval(ee),ee=null),te)){var t=te;te=null,t()}}function re(e){i.onAbort&&i.onAbort(e),S(e+=""),M=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}function se(e,t){return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}i.preloadedImages={},i.preloadedAudios={};var ie="data:application/octet-stream;base64,";function ue(e){return se(e,ie)}var oe="file://";function de(e){return se(e,oe)}var ce="tfjs-backend-wasm.wasm";function le(e){try{if(e==ce&&k)return new Uint8Array(k);if(b)return b(e);throw"both async and sync fetching of the wasm failed"}catch(e){re(e)}}function pe(){if(!k&&(c||l)){if("function"==typeof fetch&&!de(ce))return fetch(ce,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ce+"'";return e.arrayBuffer()})).catch((function(){return le(ce)}));if(h)return new Promise((function(e,t){h(ce,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return le(ce)}))}function fe(){var e={a:Oe};function t(e,t){var n=e.exports;i.asm=n,U((I=i.asm.j).buffer),z=i.asm.r,ae()}function n(e){t(e.instance)}function a(t){return pe().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){S("failed to asynchronously prepare wasm: "+e),re(e)}))}if(ne(),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){return S("Module.instantiateWasm callback failed with error: "+e),!1}return(k||"function"!=typeof WebAssembly.instantiateStreaming||ue(ce)||de(ce)||"function"!=typeof fetch?a(n):fetch(ce,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return S("wasm streaming compile failed: "+e),S("falling back to ArrayBuffer instantiation"),a(n)}))}))).catch(r),{}}function me(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?z.get(n)():z.get(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(i)}}function he(){re()}function be(e,t,n){T.copyWithin(e,t,t+n)}function ye(){return T.length}function ge(e){try{return I.grow(e-N.byteLength+65535>>>16),U(I.buffer),1}catch(e){}}function _e(e){var t=ye(),n=2147483648;if(e>n)return!1;for(var a=1;a<=4;a*=2){var r=t*(1+.2/a);if(r=Math.min(r,e+100663296),ge(Math.min(n,H(Math.max(e,r),65536))))return!0}return!1}ue(ce)||(ce=w(ce));var we={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=we.buffers[e];0===t||10===t?((1===e?v:S)(C(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return we.varargs+=4,R[we.varargs-4>>2]},getStr:function(e){return D(e)},get64:function(e,t){return e}};function ke(e){return 0}function Ie(e,t,n,a,r){}function ve(e,t,n,a){for(var r=0,s=0;s<n;s++){for(var i=R[t+8*s>>2],u=R[t+(8*s+4)>>2],o=0;o<u;o++)we.printChar(e,T[i+o]);r+=u}return R[a>>2]=r,0}function Se(){return 6}function Me(){return 28}function Ee(e){return R[Re()>>2]=e,e}function xe(e){switch(e){case 30:return 16384;case 85:return 131072;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:case 80:case 81:case 79:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Ee(28),-1}var Ae,Fe,Ne,Oe={a:he,d:be,e:_e,f:ke,c:Ie,b:ve,h:Se,g:Me,i:xe},Te=(fe(),i.___wasm_call_ctors=function(){return(Te=i.___wasm_call_ctors=i.asm.k).apply(null,arguments)}),Re=(i._init=function(){return(i._init=i.asm.l).apply(null,arguments)},i._init_with_threads_count=function(){return(i._init_with_threads_count=i.asm.m).apply(null,arguments)},i._get_threads_count=function(){return(i._get_threads_count=i.asm.n).apply(null,arguments)},i._register_tensor=function(){return(i._register_tensor=i.asm.o).apply(null,arguments)},i._dispose_data=function(){return(i._dispose_data=i.asm.p).apply(null,arguments)},i._dispose=function(){return(i._dispose=i.asm.q).apply(null,arguments)},i._Abs=function(){return(i._Abs=i.asm.s).apply(null,arguments)},i._Add=function(){return(i._Add=i.asm.t).apply(null,arguments)},i._AddN=function(){return(i._AddN=i.asm.u).apply(null,arguments)},i._All=function(){return(i._All=i.asm.v).apply(null,arguments)},i._Any=function(){return(i._Any=i.asm.w).apply(null,arguments)},i._ArgMax=function(){return(i._ArgMax=i.asm.x).apply(null,arguments)},i._AvgPool=function(){return(i._AvgPool=i.asm.y).apply(null,arguments)},i._BatchMatMul=function(){return(i._BatchMatMul=i.asm.z).apply(null,arguments)},i._Ceil=function(){return(i._Ceil=i.asm.A).apply(null,arguments)},i._ClipByValue=function(){return(i._ClipByValue=i.asm.B).apply(null,arguments)},i._Conv2D=function(){return(i._Conv2D=i.asm.C).apply(null,arguments)},i._Conv2DBackpropInput=function(){return(i._Conv2DBackpropInput=i.asm.D).apply(null,arguments)},i._Cos=function(){return(i._Cos=i.asm.E).apply(null,arguments)},i._Cosh=function(){return(i._Cosh=i.asm.F).apply(null,arguments)},i._CropAndResize=function(){return(i._CropAndResize=i.asm.G).apply(null,arguments)},i._Cumsum=function(){return(i._Cumsum=i.asm.H).apply(null,arguments)},i._DepthToSpace=function(){return(i._DepthToSpace=i.asm.I).apply(null,arguments)},i._DepthwiseConv2dNative=function(){return(i._DepthwiseConv2dNative=i.asm.J).apply(null,arguments)},i._Elu=function(){return(i._Elu=i.asm.K).apply(null,arguments)},i._Equal=function(){return(i._Equal=i.asm.L).apply(null,arguments)},i._Exp=function(){return(i._Exp=i.asm.M).apply(null,arguments)},i._FlipLeftRight=function(){return(i._FlipLeftRight=i.asm.N).apply(null,arguments)},i._Floor=function(){return(i._Floor=i.asm.O).apply(null,arguments)},i._FloorDiv=function(){return(i._FloorDiv=i.asm.P).apply(null,arguments)},i._FusedBatchNorm=function(){return(i._FusedBatchNorm=i.asm.Q).apply(null,arguments)},i._FusedConv2D=function(){return(i._FusedConv2D=i.asm.R).apply(null,arguments)},i._FusedDepthwiseConv2D=function(){return(i._FusedDepthwiseConv2D=i.asm.S).apply(null,arguments)},i._Gather=function(){return(i._Gather=i.asm.T).apply(null,arguments)},i._GatherNd=function(){return(i._GatherNd=i.asm.U).apply(null,arguments)},i._Greater=function(){return(i._Greater=i.asm.V).apply(null,arguments)},i._GreaterEqual=function(){return(i._GreaterEqual=i.asm.W).apply(null,arguments)},i._LeakyRelu=function(){return(i._LeakyRelu=i.asm.X).apply(null,arguments)},i._Less=function(){return(i._Less=i.asm.Y).apply(null,arguments)},i._LessEqual=function(){return(i._LessEqual=i.asm.Z).apply(null,arguments)},i._Log=function(){return(i._Log=i.asm._).apply(null,arguments)},i._LogicalAnd=function(){return(i._LogicalAnd=i.asm.$).apply(null,arguments)},i._Max=function(){return(i._Max=i.asm.aa).apply(null,arguments)},i._MaxPool=function(){return(i._MaxPool=i.asm.ba).apply(null,arguments)},i._Maximum=function(){return(i._Maximum=i.asm.ca).apply(null,arguments)},i._Mean=function(){return(i._Mean=i.asm.da).apply(null,arguments)},i._Min=function(){return(i._Min=i.asm.ea).apply(null,arguments)},i._Minimum=function(){return(i._Minimum=i.asm.fa).apply(null,arguments)},i._MirrorPad=function(){return(i._MirrorPad=i.asm.ga).apply(null,arguments)},i._Multiply=function(){return(i._Multiply=i.asm.ha).apply(null,arguments)},i._Neg=function(){return(i._Neg=i.asm.ia).apply(null,arguments)},i._NonMaxSuppressionV3=function(){return(i._NonMaxSuppressionV3=i.asm.ja).apply(null,arguments)},i._NonMaxSuppressionV4=function(){return(i._NonMaxSuppressionV4=i.asm.ka).apply(null,arguments)},i._NonMaxSuppressionV5=function(){return(i._NonMaxSuppressionV5=i.asm.la).apply(null,arguments)},i._NotEqual=function(){return(i._NotEqual=i.asm.ma).apply(null,arguments)},i._OneHot=function(){return(i._OneHot=i.asm.na).apply(null,arguments)},i._PadV2=function(){return(i._PadV2=i.asm.oa).apply(null,arguments)},i._Pow=function(){return(i._Pow=i.asm.pa).apply(null,arguments)},i._Prelu=function(){return(i._Prelu=i.asm.qa).apply(null,arguments)},i._Prod=function(){return(i._Prod=i.asm.ra).apply(null,arguments)},i._RealDiv=function(){return(i._RealDiv=i.asm.sa).apply(null,arguments)},i._Relu=function(){return(i._Relu=i.asm.ta).apply(null,arguments)},i._Relu6=function(){return(i._Relu6=i.asm.ua).apply(null,arguments)},i._ResizeBilinear=function(){return(i._ResizeBilinear=i.asm.va).apply(null,arguments)},i._Reverse=function(){return(i._Reverse=i.asm.wa).apply(null,arguments)},i._RotateWithOffset=function(){return(i._RotateWithOffset=i.asm.xa).apply(null,arguments)},i._Round=function(){return(i._Round=i.asm.ya).apply(null,arguments)},i._Rsqrt=function(){return(i._Rsqrt=i.asm.za).apply(null,arguments)},i._ScatterNd=function(){return(i._ScatterNd=i.asm.Aa).apply(null,arguments)},i._SelectV2=function(){return(i._SelectV2=i.asm.Ba).apply(null,arguments)},i._Sigmoid=function(){return(i._Sigmoid=i.asm.Ca).apply(null,arguments)},i._Sin=function(){return(i._Sin=i.asm.Da).apply(null,arguments)},i._Softmax=function(){return(i._Softmax=i.asm.Ea).apply(null,arguments)},i._SparseFillEmptyRows=function(){return(i._SparseFillEmptyRows=i.asm.Fa).apply(null,arguments)},i._SparseReshape=function(){return(i._SparseReshape=i.asm.Ga).apply(null,arguments)},i._SparseSegmentReduction=function(){return(i._SparseSegmentReduction=i.asm.Ha).apply(null,arguments)},i._Sqrt=function(){return(i._Sqrt=i.asm.Ia).apply(null,arguments)},i._Square=function(){return(i._Square=i.asm.Ja).apply(null,arguments)},i._SquaredDifference=function(){return(i._SquaredDifference=i.asm.Ka).apply(null,arguments)},i._Step=function(){return(i._Step=i.asm.La).apply(null,arguments)},i._StridedSlice=function(){return(i._StridedSlice=i.asm.Ma).apply(null,arguments)},i._Sub=function(){return(i._Sub=i.asm.Na).apply(null,arguments)},i._Sum=function(){return(i._Sum=i.asm.Oa).apply(null,arguments)},i._Tan=function(){return(i._Tan=i.asm.Pa).apply(null,arguments)},i._Tanh=function(){return(i._Tanh=i.asm.Qa).apply(null,arguments)},i._Tile=function(){return(i._Tile=i.asm.Ra).apply(null,arguments)},i._TopK=function(){return(i._TopK=i.asm.Sa).apply(null,arguments)},i._Transform=function(){return(i._Transform=i.asm.Ta).apply(null,arguments)},i._Transpose=function(){return(i._Transpose=i.asm.Ua).apply(null,arguments)},i.__FusedMatMul=function(){return(i.__FusedMatMul=i.asm.Va).apply(null,arguments)},i._malloc=function(){return(i._malloc=i.asm.Wa).apply(null,arguments)},i._free=function(){return(i._free=i.asm.Xa).apply(null,arguments)},i.___errno_location=function(){return(Re=i.___errno_location=i.asm.Ya).apply(null,arguments)}),Pe=i.stackSave=function(){return(Pe=i.stackSave=i.asm.Za).apply(null,arguments)},Ce=i.stackRestore=function(){return(Ce=i.stackRestore=i.asm._a).apply(null,arguments)},De=i.stackAlloc=function(){return(De=i.stackAlloc=i.asm.$a).apply(null,arguments)};function Le(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function We(e){function n(){Ae||(Ae=!0,i.calledRun=!0,M||(K(),X(),t(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),Q()))}e=e||d,J>0||($(),J>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),n()}),1)):n()))}if(i.cwrap=F,te=function e(){Ae||We(),Ae||(te=e)},i.run=We,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();if(We(),s&&(Fe={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!s.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!s.unhandledRejection.indexOf(e)>-1}))}),void 0!==e)Ne=e;else{if("undefined"==typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");Ne=WasmBackendModuleThreadedSimd}if(Fe){var Be=Ne._dispose;Ne._dispose=function(){Be(),Fe.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),Fe.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return e.ready});e.exports=r}}]);